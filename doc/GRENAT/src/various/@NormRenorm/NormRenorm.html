<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of NormRenorm</title>
  <meta name="keywords" content="NormRenorm">
  <meta name="description" content="% Normalization and renormalization of the Data (class version)">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../../../menu.html GRENAT --><!-- # src --><!-- ../menu.html various --><!-- menu.html @NormRenorm -->
<h1>NormRenorm
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>% Normalization and renormalization of the Data (class version)</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">% Normalization and renormalization of the Data (class version)
 L. LAURENT -- 02/08/2017 -- luc.laurent@lecnam.net</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="../../../../GRENAT/src/kernANDfun/@KernMatrix/init.html" class="code" title="function init(obj)">init</a>	% Method of KernMatrix class</li><li><a href="../../../../GRENAT/src/surrogate/@KRG/addGrad.html" class="code" title="function addGrad(obj,newG)">addGrad</a>	% Method of KRG class</li><li><a href="../../../../GRENAT/src/surrogate/@KRG/addResp.html" class="code" title="function addResp(obj,newR)">addResp</a>	% Method of KRG class</li><li><a href="../../../../GRENAT/src/surrogate/@RBF/addGrad.html" class="code" title="function addGrad(obj,newG)">addGrad</a>	% Method of RBF class</li><li><a href="../../../../GRENAT/src/surrogate/@RBF/addResp.html" class="code" title="function addResp(obj,newR)">addResp</a>	% Method of RBF class</li><li><a href="../../../../GRENAT/src/surrogate/@SVR/addGrad.html" class="code" title="function addGrad(obj,newG)">addGrad</a>	% Method of SVR class</li><li><a href="../../../../GRENAT/src/surrogate/@SVR/addResp.html" class="code" title="function addResp(obj,newR)">addResp</a>	% Method of SVR class</li><li><a href="../../../../GRENAT/src/surrogate/@xLS/addGrad.html" class="code" title="function addGrad(obj,newG)">addGrad</a>	% Method of xLS class</li><li><a href="../../../../GRENAT/src/surrogate/@xLS/addResp.html" class="code" title="function addResp(obj,newR)">addResp</a>	% Method of xLS class</li><li><a href="../../../../GRENAT/src/various/@MissData/addGrad.html" class="code" title="function addGrad(obj,in)">addGrad</a>	% Method of MissData class</li><li><a href="../../../../GRENAT/src/various/@MissData/addResp.html" class="code" title="function addResp(obj,in)">addResp</a>	% Method of MissData class</li><li><a href="../../../../GRENAT/src/various/@MissData/addSampling.html" class="code" title="function addSampling(obj,in)">addSampling</a>	% Method of MissData class</li><li><a href="Norm.html" class="code" title="function out=Norm(obj,in,type)">Norm</a>	% Method of NormRenorm class</li><li><a href="NormG.html" class="code" title="function out=NormG(obj,in)">NormG</a>	% Method of NormRenorm class</li><li><a href="NormRenorm.html" class="code" title="">NormRenorm</a>	% Normalization and renormalization of the Data (class version)</li><li><a href="addGrad.html" class="code" title="function out=addGrad(obj,in)">addGrad</a>	% Method of NormRenorm class</li><li><a href="addResp.html" class="code" title="function out=addResp(obj,in)">addResp</a>	% Method of NormRenorm class</li><li><a href="addSampling.html" class="code" title="function out=addSampling(obj,in)">addSampling</a>	% Method of NormRenorm class</li><li><a href="choiceData.html" class="code" title="function flag=choiceData(obj,type)">choiceData</a>	% Method of NormRenorm class</li><li><a href="computeNorm.html" class="code" title="function computeNorm(obj,in,type)">computeNorm</a>	% Method of NormRenorm class</li><li><a href="init.html" class="code" title="function init(obj,type)">init</a>	% Method of NormRenorm class</li><li><a href="loadConf.html" class="code" title="function loadConf(obj,StClIn)">loadConf</a>	% Method of NormRenorm class</li><li><a href="reNorm.html" class="code" title="function out=reNorm(obj,in,type)">reNorm</a>	% Method of NormRenorm class</li><li><a href="reNormDiff.html" class="code" title="function out=reNormDiff(obj,in,type)">reNormDiff</a>	% Method of NormRenorm class</li><li><a href="reNormG.html" class="code" title="function out=reNormG(obj,in,concat)">reNormG</a>	% Method of NormRenorm class</li><li><a href="reNormVar.html" class="code" title="function out=reNormVar(obj,in)">reNormVar</a>	% Method of NormRenorm class</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="../../../../GRENAT/@GRENAT/initGRENAT.html" class="code" title="function initGRENAT(obj)">initGRENAT</a>	% Method of GRENAT class</li><li><a href="NormRenorm.html" class="code" title="">NormRenorm</a>	% Normalization and renormalization of the Data (class version)</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function obj=NormRenorm(in,varargin)</a></li><li><a href="#_sub2" class="code">function set.meanN(obj,val)</a></li><li><a href="#_sub3" class="code">function set.meanR(obj,val)</a></li><li><a href="#_sub4" class="code">function set.meanS(obj,val)</a></li><li><a href="#_sub5" class="code">function set.stdN(obj,val)</a></li><li><a href="#_sub6" class="code">function set.stdR(obj,val)</a></li><li><a href="#_sub7" class="code">function set.stdS(obj,val)</a></li><li><a href="#_sub8" class="code">function flag=get.gradOk(obj)</a></li><li><a href="#_sub9" class="code">function out=get.gradN(obj)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%% Normalization and renormalization of the Data (class version)</span>
0002 <span class="comment">% L. LAURENT -- 02/08/2017 -- luc.laurent@lecnam.net</span>
0003 
0004 <span class="comment">%     GRENAT - GRadient ENhanced Approximation Toolbox</span>
0005 <span class="comment">%     A toolbox for generating and exploiting gradient-enhanced surrogate models</span>
0006 <span class="comment">%     Copyright (C) 2016-2017  Luc LAURENT &lt;luc.laurent@lecnam.net&gt;</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%     This program is free software: you can redistribute it and/or modify</span>
0009 <span class="comment">%     it under the terms of the GNU General Public License as published by</span>
0010 <span class="comment">%     the Free Software Foundation, either version 3 of the License, or</span>
0011 <span class="comment">%     (at your option) any later version.</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%     This program is distributed in the hope that it will be useful,</span>
0014 <span class="comment">%     but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
0015 <span class="comment">%     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
0016 <span class="comment">%     GNU General Public License for more details.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">%     You should have received a copy of the GNU General Public License</span>
0019 <span class="comment">%     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
0020 
0021 classdef <a href="NormRenorm.html" class="code" title="">NormRenorm</a> &lt; handle
0022     properties
0023         <span class="comment">%</span>
0024         meanC=[];
0025         stdC=[];
0026         <span class="comment">%</span>
0027         meanN=[];
0028         stdN=[];
0029         <span class="comment">%</span>
0030         stdR=[];
0031         meanR=[];
0032         <span class="comment">%</span>
0033         stdS=[];
0034         meanS=[];
0035         <span class="comment">%</span>
0036         respN=[];
0037         samplingN=[];
0038         gradN=[];
0039         grad=[];
0040         <span class="comment">%</span>
0041         outC=[];
0042     <span class="keyword">end</span>
0043     properties (Access = private)
0044         type=<span class="string">'n'</span>;       <span class="comment">%type of normalization (&quot;n&quot; normal, &quot;r&quot; responses, &quot;s&quot; sampling)</span>
0045         gradNormOk=false;   <span class="comment">% true if the available gradients have been normalized</span>
0046     <span class="keyword">end</span>
0047     properties (Access = private, Dependent )
0048         gradOk=false;       <span class="comment">% sufficient data for normalization and renormalization of gradients</span>
0049     <span class="keyword">end</span>
0050     methods
0051         <span class="comment">%% constructor</span>
0052         <span class="comment">% syntax:</span>
0053         <span class="comment">% - NormRenorm(inV);                    % normalize the inV array and store the data</span>
0054         <span class="comment">% as current</span>
0055         <span class="comment">% - NormRenorm(inV,type);               % normalize the inV array and store the data</span>
0056         <span class="comment">% as data specified in type (resp, sampling)</span>
0057         <span class="comment">% - NormRenorm(inV,data)                % renormalize inV using data (structure or</span>
0058         <span class="comment">% object)</span>
0059         <span class="comment">% - NormRenorm(sample,resp)             % normalize sampling and</span>
0060         <span class="comment">% responses and store them (respect order sample, resp)</span>
0061         <span class="comment">% - NormRenorm(sample,resp,data)        % renormalize sampling and</span>
0062         <span class="comment">% responses and using data (structure or object) (respect order sample, resp)</span>
0063         
0064         <a name="_sub0" href="#_subfunctions" class="code">function obj=NormRenorm(in,varargin)</a>
0065             <span class="comment">%% depending of the type of the input arguments</span>
0066             <span class="comment">% look for a string in the input arguments (corresponding to</span>
0067             <span class="comment">% type)</span>
0068             <span class="keyword">if</span> nargin&gt;1
0069                 StCl=[];
0070                 sTxt=find(cellfun(@ischar,varargin)~=false);
0071                 <span class="keyword">if</span> ~isempty(sTxt);obj.type=varargin{sTxt};<span class="keyword">end</span>
0072                 <span class="comment">% look for a struct or a class</span>
0073                 sSC=cellfun(@isstruct,varargin)||cellfun(@isobject,varargin);
0074                 sSC=find(sSC~=false);
0075                 <span class="keyword">if</span> ~isempty(sSC);StCl=varargin{sSC};<span class="keyword">end</span>
0076                 <span class="comment">%look for an array or a double</span>
0077                 sM=find(cellfun(@ismatrix,varargin)~=false);
0078                 <span class="keyword">if</span> ~isempty(sM);inB=varargin{sM};<span class="keyword">end</span>
0079                 <span class="comment">%</span>
0080                 
0081                 <span class="comment">%if the configuration can be loaded</span>
0082                 <span class="keyword">if</span> ~isempty(StCl)
0083                     obj.loadConf(StCl);
0084                 <span class="keyword">end</span>
0085                 <span class="comment">%case if sampling and responses are given without configuration</span>
0086                 <span class="keyword">if</span> ~isempty(inB)&amp;&amp;isempty(StCl)
0087                     obj.addSampling(in);
0088                     obj.addResp(inB);
0089                 <span class="keyword">else</span>
0090                     obj.computeNorm(in,obj.type);
0091                     obj.outC=obj.Norm(in,obj.type);
0092                 <span class="keyword">end</span>
0093                 <span class="comment">%case if sampling and responses are given with configuration</span>
0094                 <span class="keyword">if</span> ~isempty(inB)&amp;&amp;~isempty(StCl)
0095                     obj.outC{1}=obj.reNorm(in,<span class="string">'s'</span>);
0096                     obj.outC{2}=obj.reNorm(inB,<span class="string">'r'</span>);
0097                 <span class="keyword">end</span>
0098             <span class="keyword">end</span>
0099             <span class="keyword">if</span> nargin==1
0100                 obj.computeNorm(in,obj.type);
0101                 obj.outC=obj.Norm(in,obj.type);
0102             <span class="keyword">end</span>
0103         <span class="keyword">end</span>
0104         
0105         <span class="comment">%% setters</span>
0106         <a name="_sub1" href="#_subfunctions" class="code">function set.meanN(obj,val)</a>
0107             <span class="keyword">if</span> ~isempty(val);obj.meanN=val;<span class="keyword">end</span>
0108         <span class="keyword">end</span>
0109         <a name="_sub2" href="#_subfunctions" class="code">function set.meanR(obj,val)</a>
0110             <span class="keyword">if</span> ~isempty(val);obj.meanR=val;<span class="keyword">end</span>
0111         <span class="keyword">end</span>
0112         <a name="_sub3" href="#_subfunctions" class="code">function set.meanS(obj,val)</a>
0113             <span class="keyword">if</span> ~isempty(val);obj.meanS=val;<span class="keyword">end</span>
0114         <span class="keyword">end</span>
0115         <a name="_sub4" href="#_subfunctions" class="code">function set.stdN(obj,val)</a>
0116             <span class="keyword">if</span> ~isempty(val);obj.stdN=val;<span class="keyword">end</span>
0117         <span class="keyword">end</span>
0118         <a name="_sub5" href="#_subfunctions" class="code">function set.stdR(obj,val)</a>
0119             <span class="keyword">if</span> ~isempty(val);obj.stdR=val;<span class="keyword">end</span>
0120         <span class="keyword">end</span>
0121         <a name="_sub6" href="#_subfunctions" class="code">function set.stdS(obj,val)</a>
0122             <span class="keyword">if</span> ~isempty(val);obj.stdS=val;<span class="keyword">end</span>
0123         <span class="keyword">end</span>
0124         
0125         <span class="comment">%% getter for the flag for computing gradients</span>
0126         <a name="_sub7" href="#_subfunctions" class="code">function flag=get.gradOk(obj)</a>
0127             flag=(~isempty(obj.stdR)<span class="keyword">...</span>
0128                 &amp;&amp;~isempty(obj.stdS));
0129         <span class="keyword">end</span>
0130         
0131         <span class="comment">%% getter for the normalized gradients</span>
0132         <a name="_sub8" href="#_subfunctions" class="code">function out=get.gradN(obj)</a>
0133             <span class="comment">%if the data hase been already normalized, load it</span>
0134             <span class="keyword">if</span> obj.gradNormOk
0135                 out=obj.gradN;
0136             <span class="keyword">else</span>
0137                 out=obj.NormG(obj.grad);
0138                 obj.gradN=out;
0139                 obj.grad=[];
0140             <span class="keyword">end</span>
0141         <span class="keyword">end</span>
0142         
0143         <span class="comment">%% Initialize all data</span>
0144         <a href="init.html" class="code" title="function init(obj,type)">init</a>(obj);
0145         <span class="comment">%% Load existing information (defined using structure)</span>
0146         <a href="loadConf.html" class="code" title="function loadConf(obj,StClIn)">loadConf</a>(obj,StClIn);
0147         <span class="comment">%% Compute normalization data</span>
0148         <a href="computeNorm.html" class="code" title="function computeNorm(obj,in,type)">computeNorm</a>(obj,in,type);
0149         <span class="comment">%% Add responses and normalize</span>
0150         out=<a href="addResp.html" class="code" title="function out=addResp(obj,in)">addResp</a>(obj,in);
0151         <span class="comment">%% Add sample points and normalize</span>
0152         out=<a href="addSampling.html" class="code" title="function out=addSampling(obj,in)">addSampling</a>(obj,in);
0153         <span class="comment">%% Add gradients and normalize</span>
0154         out=<a href="addGrad.html" class="code" title="function out=addGrad(obj,in)">addGrad</a>(obj,in);
0155         <span class="comment">%% Choice of the current normalization data</span>
0156         flag=<a href="choiceData.html" class="code" title="function flag=choiceData(obj,type)">choiceData</a>(obj,type);
0157         <span class="comment">%% Normalization of sampling or responses</span>
0158         out=<a href="Norm.html" class="code" title="function out=Norm(obj,in,type)">Norm</a>(obj,in,type);
0159         <span class="comment">%% Renormalization of sample points or responses</span>
0160         out=<a href="reNorm.html" class="code" title="function out=reNorm(obj,in,type)">reNorm</a>(obj,in,type);
0161         <span class="comment">%% Normalization of gradients</span>
0162         out=<a href="NormG.html" class="code" title="function out=NormG(obj,in)">NormG</a>(obj,in);
0163         <span class="comment">%% Renormalization of gradients</span>
0164         out=<a href="reNormG.html" class="code" title="function out=reNormG(obj,in,concat)">reNormG</a>(obj,in,concat);
0165         <span class="comment">%% Renormalization data obtained from difference of normalized data</span>
0166         out=<a href="reNormDiff.html" class="code" title="function out=reNormDiff(obj,in,type)">reNormDiff</a>(obj,in,type);
0167         <span class="comment">%% Renormalization of variance</span>
0168         out=<a href="reNormVar.html" class="code" title="function out=reNormVar(obj,in)">reNormVar</a>(obj,in);
0169     <span class="keyword">end</span>
0170 <span class="keyword">end</span>
0171</pre></div>
<hr><address>Generated on Wed 02-Oct-2019 17:46:23 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>