<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of GRENAT</title>
  <meta name="keywords" content="GRENAT">
  <meta name="description" content="% GRENAT class for manipulating gradient-enhanced metamodels">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- menu.html GRENAT -->
<h1>GRENAT
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>% GRENAT class for manipulating gradient-enhanced metamodels</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">% GRENAT class for manipulating gradient-enhanced metamodels
 L. LAURENT -- 26/06/2016 -- luc.laurent@lecnam.net</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="GRENAT.html" class="code" title="">GRENAT</a>	% GRENAT class for manipulating gradient-enhanced metamodels</li><li><a href="initDirGRENAT.html" class="code" title="function foldersLoad=initDirGRENAT(pathcustom,other,flagNested)">initDirGRENAT</a>	% Initialization of the directories (MATLAB's path)</li><li><a href="../GRENAT/src/crit/BuildCI.html" class="code" title="function [ci68,ci95,ci99]=BuildCI(ZZ,var)">BuildCI</a>	% function for building confidence intervals (CI)</li><li><a href="../GRENAT/src/crit/InfillCrit.html" class="code" title="function [ZI,detInfill]=InfillCrit(respMin,Z,varZ,infillData)">InfillCrit</a>	% Compute infill criteria EI/WEI/LCB</li><li><a href="../GRENAT/src/crit/critErrDisp.html" class="code" title="function [err,errV,errNAME]=critErrDisp(Zap,Zref,data)">critErrDisp</a>	% Compute error criteria and display</li><li><a href="../GRENAT/src/disp/dispDate.html" class="code" title="function dispDate(type)">dispDate</a>	% Display date and time</li><li><a href="../GRENAT/src/disp/displaySurrogate.html" class="code" title="function figHandle=displaySurrogate(gridXY,Z,sampling,resp,grad,dispData)">displaySurrogate</a>	% function for displaying response surfaces</li><li><a href="../GRENAT/src/disp/displaySurrogateCI.html" class="code" title="function displaySurrogateCI(Xpts,ic,dispData,Z)">displaySurrogateCI</a>	% Display confidence intervals</li><li><a href="../GRENAT/src/init/initDisp.html" class="code" title="">initDisp</a>	% Initialization of display variables</li><li><a href="../GRENAT/src/init/initMeta.html" class="code" title="">initMeta</a>	% Initialization of the surrogate model</li><li><a href="../GRENAT/src/surrogate/BuildMeta.html" class="code" title="function [outMeta]=BuildMeta(samplingIn,respIn,gradIn,metaData)">BuildMeta</a>	% function for building surrogate model</li><li><a href="../GRENAT/src/surrogate/EvalMeta.html" class="code" title="function [Z]=EvalMeta(evalSample,dataTrain,metaConf,Verb)">EvalMeta</a>	% Evaluation of the surrogate model</li><li><a href="../GRENAT/src/various/CheckInputData.html" class="code" title="function [ret]=CheckInputData(sampling,resp,grad)">CheckInputData</a>	% check input data for finding missing information</li><li><a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>	% function for printing information on the command window (based on fprintf)</li><li><a href="../GRENAT/src/various/NormRenorm.html" class="code" title="function [out,infoData]=NormRenorm(in,type,infoData)">NormRenorm</a>	% Normalization and renormalization of the Data</li><li><a href="../GRENAT/src/various/NormRenormG.html" class="code" title="function [out]=NormRenormG(in,type,infoDataS,infoDataR)">NormRenormG</a>	% normalization and renormalization of the gradient data</li><li><a href="../GRENAT/src/various/checkInterpRG.html" class="code" title="function statusI=checkInterpRG(ZRef,ZApp,type,critR,critG)">checkInterpRG</a>	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="ExampleUse1D.html" class="code" title="">ExampleUse1D</a>	Example of use of GRENAT without the sampling toolbox</li><li><a href="ExampleUse2D.html" class="code" title="">ExampleUse2D</a>	% Example of use of GRENAT without the sampling toolbox</li><li><a href="ExampleUseDOE.html" class="code" title="">ExampleUseDOE</a>	% Example of use of the GRENAToolbox with the MultiDOE one</li><li><a href="GRENAT.html" class="code" title="">GRENAT</a>	% GRENAT class for manipulating gradient-enhanced metamodels</li><li><a href="README.html" class="code" title="">README</a>	</li><li><a href="Ros10DGKRG.html" class="code" title="">Ros10DGKRG</a>	load folder structure</li><li><a href="Ros10DGRBF.html" class="code" title="">Ros10DGRBF</a>	load folder structure</li><li><a href="Ros10DInKRG.html" class="code" title="">Ros10DInKRG</a>	load folder structure</li><li><a href="Ros10DInRBF.html" class="code" title="">Ros10DInRBF</a>	load folder structure</li><li><a href="Ros10DKRG.html" class="code" title="">Ros10DKRG</a>	load folder structure</li><li><a href="Ros10DRBF.html" class="code" title="">Ros10DRBF</a>	load folder structure</li><li><a href="Ros5DGKRG.html" class="code" title="">Ros5DGKRG</a>	load folder structure</li><li><a href="Ros5DGRBF.html" class="code" title="">Ros5DGRBF</a>	load folder structure</li><li><a href="Ros5DInKRG.html" class="code" title="">Ros5DInKRG</a>	load folder structure</li><li><a href="Ros5DInRBF.html" class="code" title="">Ros5DInRBF</a>	load folder structure</li><li><a href="Ros5DKRG.html" class="code" title="">Ros5DKRG</a>	load folder structure</li><li><a href="Ros5DRBF.html" class="code" title="">Ros5DRBF</a>	load folder structure</li><li><a href="Sch10DGKRG.html" class="code" title="">Sch10DGKRG</a>	load folder structure</li><li><a href="Sch10DGRBF.html" class="code" title="">Sch10DGRBF</a>	load folder structure</li><li><a href="Sch10DInKRG.html" class="code" title="">Sch10DInKRG</a>	load folder structure</li><li><a href="Sch10DInRBF.html" class="code" title="">Sch10DInRBF</a>	load folder structure</li><li><a href="Sch10DKRG.html" class="code" title="">Sch10DKRG</a>	load folder structure</li><li><a href="Sch10DRBF.html" class="code" title="">Sch10DRBF</a>	load folder structure</li><li><a href="Sch5DGKRG.html" class="code" title="">Sch5DGKRG</a>	load folder structure</li><li><a href="Sch5DGRBF.html" class="code" title="">Sch5DGRBF</a>	load folder structure</li><li><a href="Sch5DInKRG.html" class="code" title="">Sch5DInKRG</a>	load folder structure</li><li><a href="Sch5DInRBF.html" class="code" title="">Sch5DInRBF</a>	load folder structure</li><li><a href="Sch5DKRG.html" class="code" title="">Sch5DKRG</a>	load folder structure</li><li><a href="Sch5DRBF.html" class="code" title="">Sch5DRBF</a>	load folder structure</li><li><a href="debug_1D.html" class="code" title="">debug_1D</a>	% Example of use of GRENAT without the sampling toolbox</li><li><a href="debug_2D.html" class="code" title="">debug_2D</a>	% Example of use of GRENAT without the sampling toolbox</li><li><a href="studyLS.html" class="code" title="">studyLS</a>	</li><li><a href="studyLS_2D.html" class="code" title="">studyLS_2D</a>	</li><li><a href="studyLS_nD.html" class="code" title="">studyLS_nD</a>	</li><li><a href="time_measure_matrix.html" class="code" title="">time_measure_matrix</a>	time measure for building covariance matrix</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function obj=GRENAT(typeIn,samplingIn,respIn,gradIn)</a></li><li><a href="#_sub2" class="code">function set.sampling(obj,samplingIn)</a></li><li><a href="#_sub3" class="code">function set.resp(obj,respIn)</a></li><li><a href="#_sub4" class="code">function set.grad(obj,gradIn)</a></li><li><a href="#_sub5" class="code">function set.nonsamplePts(obj,samplingIn)</a></li><li><a href="#_sub6" class="code">function set.type(obj,typeIn)</a></li><li><a href="#_sub7" class="code">function type=get.type(obj)</a></li><li><a href="#_sub8" class="code">function PtS=get.nonsamplePtsOrder(obj)</a></li><li><a href="#_sub9" class="code">function Z=get.nonsampleResp(obj)</a></li><li><a href="#_sub10" class="code">function GZ=get.nonsampleGrad(obj)</a></li><li><a href="#_sub11" class="code">function variance=get.nonsampleVar(obj)</a></li><li><a href="#_sub12" class="code">function err=get.err(obj)</a></li><li><a href="#_sub13" class="code">function normStruct=get.norm(obj)</a></li><li><a href="#_sub14" class="code">function initRunTrain(obj,flag)</a></li><li><a href="#_sub15" class="code">function initGradAvail(obj,flag)</a></li><li><a href="#_sub16" class="code">function initRunEval(obj,flag)</a></li><li><a href="#_sub17" class="code">function initData(obj,type)</a></li><li><a href="#_sub18" class="code">function dataOut=orderData(obj,dataIn,type)</a></li><li><a href="#_sub19" class="code">function dataOut=normInputData(obj,type,dataIn)</a></li><li><a href="#_sub20" class="code">function dataOut=reNormInputData(obj,type,dataIn)</a></li><li><a href="#_sub21" class="code">function resetNorm(obj)</a></li><li><a href="#_sub22" class="code">function checkMissingData(obj)</a></li><li><a href="#_sub23" class="code">function defineDisp(obj,varargin)</a></li><li><a href="#_sub24" class="code">function train(obj)</a></li><li><a href="#_sub25" class="code">function update(obj,samplingIn,respIn,gradIn,paraFind,varargin)</a></li><li><a href="#_sub26" class="code">function [Z,GZ,variance]=eval(obj,nonsamplePts,Verb)</a></li><li><a href="#_sub27" class="code">function [ZI,detI]=evalInfill(obj,nonsamplePts,Verb)</a></li><li><a href="#_sub28" class="code">function [statusR,statusG]=checkInterp(obj)</a></li><li><a href="#_sub29" class="code">function [ci68,ci95,ci99]=evalCI(obj,nonsamplePts)</a></li><li><a href="#_sub30" class="code">function [ci68,ci95,ci99]=CI(obj,nonsamplePts)</a></li><li><a href="#_sub31" class="code">function errCalc(obj)</a></li><li><a href="#_sub32" class="code">function defineRef(obj,varargin)</a></li><li><a href="#_sub33" class="code">function [okAll,okSample,okResp,okGrad]=checkRef(obj)</a></li><li><a href="#_sub34" class="code">function conf(obj,varargin)</a></li><li><a href="#_sub35" class="code">function show(obj,varargin)</a></li><li><a href="#_sub36" class="code">function show1D(obj)</a></li><li><a href="#_sub37" class="code">function show2D(obj)</a></li><li><a href="#_sub38" class="code">function showRespRef(obj)</a></li><li><a href="#_sub39" class="code">function showGradRef(obj,nbG)</a></li><li><a href="#_sub40" class="code">function showResp(obj)</a></li><li><a href="#_sub41" class="code">function showGrad(obj,nbG)</a></li><li><a href="#_sub42" class="code">function showCI(obj,ciVal,nonsamplePts)</a></li><li><a href="#_sub43" class="code">function isF=isfield(obj,field)</a></li><li><a href="#_sub44" class="code">function info=affectTxtProp()</a></li><li><a href="#_sub45" class="code">function dispTableTwoColumnsStruct(tableFiedIn,structIn)</a></li><li><a href="#_sub46" class="code">function dispTableTwoColumns(tableA,tableB)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%% GRENAT class for manipulating gradient-enhanced metamodels</span>
0002 <span class="comment">% L. LAURENT -- 26/06/2016 -- luc.laurent@lecnam.net</span>
0003 
0004 <span class="comment">%     GRENAT - GRadient ENhanced Approximation Toolbox</span>
0005 <span class="comment">%     A toolbox for generating and exploiting gradient-enhanced surrogate models</span>
0006 <span class="comment">%     Copyright (C) 2016  Luc LAURENT &lt;luc.laurent@lecnam.net&gt;</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%     This program is free software: you can redistribute it and/or modify</span>
0009 <span class="comment">%     it under the terms of the GNU General Public License as published by</span>
0010 <span class="comment">%     the Free Software Foundation, either version 3 of the License, or</span>
0011 <span class="comment">%     (at your option) any later version.</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%     This program is distributed in the hope that it will be useful,</span>
0014 <span class="comment">%     but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
0015 <span class="comment">%     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
0016 <span class="comment">%     GNU General Public License for more details.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">%     You should have received a copy of the GNU General Public License</span>
0019 <span class="comment">%     along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
0020 
0021 classdef <a href="GRENAT.html" class="code" title="">GRENAT</a> &lt; handle
0022     
0023     properties
0024         <span class="comment">%building</span>
0025         sampling=[];
0026         resp=[];
0027         grad=[];
0028         samplingN=[];
0029         respN=[];
0030         gradN=[];
0031         <span class="comment">%evaluating</span>
0032         nonsamplePts=[];
0033         nonsampleResp=[];
0034         nonsampleGrad=[];
0035         nonsamplePtsOrder=[];
0036         nonsampleRespOrder=[];
0037         nonsampleGradOrder=[];
0038         nonsamplePtsN=[];
0039         nonsampleRespN=[];
0040         nonsampleGradN=[];
0041         sizeNonSample=zeros(1,3);
0042         nonsampleVar=[];
0043         nonsampleVarOrder=[];
0044         nonsampleCI=struct(<span class="string">'ci68'</span>,[],<span class="string">'ci95'</span>,[],<span class="string">'ci98'</span>,[]);
0045         nonsampleEI=[];
0046         <span class="comment">%normalization data</span>
0047         norm;
0048         normMeanS;
0049         normStdS;
0050         normMeanR;
0051         normStdR;
0052         <span class="comment">%</span>
0053         err=[];
0054         <span class="comment">%reference</span>
0055         sampleRef=[];
0056         respRef=[];
0057         gradRef=[];
0058         <span class="comment">%structures &amp; class for storing configuration and data</span>
0059         confMeta;   <span class="comment">%metamodel configuration</span>
0060         dataTrain;  <span class="comment">%training data</span>
0061         confDisp;   <span class="comment">%display configuration</span>
0062         miss;       <span class="comment">%missing data</span>
0063     <span class="keyword">end</span>
0064     properties (Dependent)
0065         type;
0066     <span class="keyword">end</span>
0067     
0068     properties (Access = private)
0069         runTrain=true; <span class="comment">%flag for checking if the training is obsolete</span>
0070         runEval=true; <span class="comment">%flag for checking if the training is obsolete</span>
0071         gradAvail=false; <span class="comment">%flag for availability of the gradients</span>
0072         runErr=true; <span class="comment">%flag for computation of the error</span>
0073         normSamplePtsIn=false; <span class="comment">%flag for checking if the input data are normalized</span>
0074         normRespIn=false; <span class="comment">%flag for checking if the input data are normalized</span>
0075         runMissingData=true; <span class="comment">%flag for checking missing data</span>
0076         nbSubplot=0; <span class="comment">%number of subplot for display</span>
0077     <span class="keyword">end</span>
0078     properties (Access = private,Constant)
0079         infoProp=<a href="#_sub44" class="code" title="subfunction info=affectTxtProp()">affectTxtProp</a>;
0080     <span class="keyword">end</span>
0081     
0082     methods
0083         <span class="comment">%construction</span>
0084         <a name="_sub0" href="#_subfunctions" class="code">function obj=GRENAT(typeIn,samplingIn,respIn,gradIn)</a>
0085             <span class="comment">%load directories on the path</span>
0086             <a href="initDirGRENAT.html" class="code" title="function foldersLoad=initDirGRENAT(pathcustom,other,flagNested)">initDirGRENAT</a>;
0087             <span class="comment">%</span>
0088             <a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>(<span class="string">'=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=\n'</span>);
0089             <a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>(<span class="string">'=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=#=\n'</span>);
0090             <a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>(<span class="string">' Create GRENAT Object \n'</span>);
0091             <span class="comment">%the date and time</span>
0092             <a href="../GRENAT/src/disp/dispDate.html" class="code" title="function dispDate(type)">dispDate</a>;
0093             <span class="comment">%load default configuration</span>
0094             obj.confMeta=<a href="../GRENAT/src/init/initMeta.html" class="code" title="">initMeta</a>;
0095             <span class="comment">%load display configuration</span>
0096             obj.confDisp=<a href="../GRENAT/src/init/initDisp.html" class="code" title="">initDisp</a>;
0097             <span class="comment">%specific configuration</span>
0098             <span class="keyword">if</span> nargin&gt;0;obj.confMeta.type=typeIn;<span class="keyword">end</span>
0099             <span class="keyword">if</span> nargin&gt;1;obj.sampling=samplingIn;<span class="keyword">end</span>
0100             <span class="keyword">if</span> nargin&gt;2;obj.resp=respIn;<span class="keyword">end</span>
0101             <span class="keyword">if</span> nargin&gt;3;obj.grad=gradIn;<span class="keyword">end</span>
0102         <span class="keyword">end</span>
0103         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0104         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0105         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0106         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0107         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0108         <span class="comment">%setter for the sampling</span>
0109         <a name="_sub1" href="#_subfunctions" class="code">function set.sampling(obj,samplingIn)</a>
0110             <span class="keyword">if</span> ~isempty(samplingIn)
0111                 <span class="keyword">if</span> isempty(obj.sampling)
0112                     obj.sampling=samplingIn;
0113                 <span class="keyword">else</span>
0114                     obj.sampling=[obj.sampling;samplingIn];
0115                 <span class="keyword">end</span>
0116                 <a href="#_sub14" class="code" title="subfunction initRunTrain(obj,flag)">initRunTrain</a>(obj,true);
0117                 <a href="#_sub21" class="code" title="subfunction resetNorm(obj)">resetNorm</a>(obj);
0118                 <a href="#_sub17" class="code" title="subfunction initData(obj,type)">initData</a>(obj,<span class="string">'Sampling'</span>);
0119             <span class="keyword">else</span>
0120                 fprintf(<span class="string">'ERROR: Empty array of sample points\n'</span>);
0121             <span class="keyword">end</span>
0122         <span class="keyword">end</span>
0123         <span class="comment">%setter for the responses</span>
0124         <a name="_sub2" href="#_subfunctions" class="code">function set.resp(obj,respIn)</a>
0125             <span class="keyword">if</span> ~isempty(respIn)
0126                 <span class="keyword">if</span> isempty(obj.resp)
0127                     obj.resp=respIn;
0128                 <span class="keyword">else</span>
0129                     obj.resp=[obj.resp;respIn];
0130                 <span class="keyword">end</span>
0131                 <a href="#_sub14" class="code" title="subfunction initRunTrain(obj,flag)">initRunTrain</a>(obj,true);
0132                 <a href="#_sub17" class="code" title="subfunction initData(obj,type)">initData</a>(obj,<span class="string">'Resp'</span>);
0133             <span class="keyword">else</span>
0134                 fprintf(<span class="string">'ERROR: Empty array of responses\n'</span>);
0135             <span class="keyword">end</span>
0136         <span class="keyword">end</span>
0137         <span class="comment">%setter for the gradients</span>
0138         <a name="_sub3" href="#_subfunctions" class="code">function set.grad(obj,gradIn)</a>
0139             <span class="keyword">if</span> ~isempty(gradIn)
0140                 <span class="keyword">if</span> isempty(obj.grad)
0141                     obj.grad=gradIn;
0142                 <span class="keyword">else</span>
0143                     obj.grad=[obj.grad;gradIn];
0144                 <span class="keyword">end</span>
0145                 <a href="#_sub14" class="code" title="subfunction initRunTrain(obj,flag)">initRunTrain</a>(obj,true);
0146                 <a href="#_sub15" class="code" title="subfunction initGradAvail(obj,flag)">initGradAvail</a>(obj,true);
0147                 <a href="#_sub17" class="code" title="subfunction initData(obj,type)">initData</a>(obj,<span class="string">'Grad'</span>);
0148             <span class="keyword">end</span>
0149         <span class="keyword">end</span>
0150         <span class="comment">%setter for the non sample points</span>
0151         <a name="_sub4" href="#_subfunctions" class="code">function set.nonsamplePts(obj,samplingIn)</a>
0152             <span class="keyword">if</span> ~isempty(samplingIn)
0153                 obj.nonsamplePts=samplingIn;
0154                 <a href="#_sub16" class="code" title="subfunction initRunEval(obj,flag)">initRunEval</a>(obj,true);
0155             <span class="keyword">end</span>
0156         <span class="keyword">end</span>
0157         <span class="comment">%setter for the type of metamodel</span>
0158         <a name="_sub5" href="#_subfunctions" class="code">function set.type(obj,typeIn)</a>
0159             obj.confMeta.type=typeIn;
0160         <span class="keyword">end</span>
0161         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0162         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0163         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0164         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0165         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0166         <span class="comment">%getter for the type of metamodel</span>
0167         <a name="_sub6" href="#_subfunctions" class="code">function type=get.type(obj)</a>
0168             type=obj.confMeta.type;
0169         <span class="keyword">end</span>
0170         <span class="comment">%setter for the non sample points</span>
0171         <a name="_sub7" href="#_subfunctions" class="code">function PtS=get.nonsamplePtsOrder(obj)</a>
0172             PtS=<a href="#_sub18" class="code" title="subfunction dataOut=orderData(obj,dataIn,type)">orderData</a>(obj,obj.nonsamplePts,<span class="string">'sampleIn'</span>);
0173         <span class="keyword">end</span>
0174         <span class="comment">%getter for the responses at the non sample points</span>
0175         <a name="_sub8" href="#_subfunctions" class="code">function Z=get.nonsampleResp(obj)</a>
0176             <span class="keyword">if</span> obj.runEval;<a href="#_sub26" class="code" title="subfunction [Z,GZ,variance]=eval(obj,nonsamplePts,Verb)">eval</a>(obj);<span class="keyword">end</span>
0177             Z=<a href="#_sub18" class="code" title="subfunction dataOut=orderData(obj,dataIn,type)">orderData</a>(obj,obj.nonsampleRespOrder,<span class="string">'respOut'</span>);
0178         <span class="keyword">end</span>
0179         <span class="comment">%getter for the gradients at the non sample points</span>
0180         <a name="_sub9" href="#_subfunctions" class="code">function GZ=get.nonsampleGrad(obj)</a>
0181             <span class="keyword">if</span> obj.runEval;<a href="#_sub26" class="code" title="subfunction [Z,GZ,variance]=eval(obj,nonsamplePts,Verb)">eval</a>(obj);<span class="keyword">end</span>
0182             GZ=<a href="#_sub18" class="code" title="subfunction dataOut=orderData(obj,dataIn,type)">orderData</a>(obj,obj.nonsampleGradOrder,<span class="string">'gradOut'</span>);
0183         <span class="keyword">end</span>
0184         <span class="comment">%getter for the variance at the non sample points</span>
0185         <a name="_sub10" href="#_subfunctions" class="code">function variance=get.nonsampleVar(obj)</a>
0186             <span class="keyword">if</span> obj.runEval;<a href="#_sub26" class="code" title="subfunction [Z,GZ,variance]=eval(obj,nonsamplePts,Verb)">eval</a>(obj);<span class="keyword">end</span>
0187             variance=<a href="#_sub18" class="code" title="subfunction dataOut=orderData(obj,dataIn,type)">orderData</a>(obj,obj.nonsampleVarOrder,<span class="string">'respOut'</span>);
0188         <span class="keyword">end</span>
0189         <span class="comment">%getter for error values</span>
0190         <a name="_sub11" href="#_subfunctions" class="code">function err=get.err(obj)</a>
0191             <span class="keyword">if</span> obj.runErr;<a href="#_sub31" class="code" title="subfunction errCalc(obj)">errCalc</a>(obj);<span class="keyword">end</span>
0192             err=obj.err;
0193         <span class="keyword">end</span>
0194         <span class="comment">%getter for normalization data structure</span>
0195         <a name="_sub12" href="#_subfunctions" class="code">function normStruct=get.norm(obj)</a>
0196             normStruct.sampling.mean=obj.normMeanS;
0197             normStruct.sampling.std=obj.normStdS;
0198             normStruct.resp.mean=obj.normMeanR;
0199             normStruct.resp.std=obj.normStdR;
0200             normStruct.on=obj.confMeta.normOn;
0201         <span class="keyword">end</span>
0202         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0203         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0204         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0205         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0206         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0207         <span class="comment">%initialize flags</span>
0208         <a name="_sub13" href="#_subfunctions" class="code">function initRunTrain(obj,flag)</a>
0209             obj.runTrain=flag;
0210         <span class="keyword">end</span>
0211         <a name="_sub14" href="#_subfunctions" class="code">function initGradAvail(obj,flag)</a>
0212             obj.gradAvail=flag;
0213         <span class="keyword">end</span>
0214         <a name="_sub15" href="#_subfunctions" class="code">function initRunEval(obj,flag)</a>
0215             obj.runEval=flag;
0216         <span class="keyword">end</span>
0217         <span class="comment">%initialize data (remove saved data)</span>
0218         <a name="_sub16" href="#_subfunctions" class="code">function initData(obj,type)</a>
0219             <span class="keyword">if</span> nargin==1
0220                 obj.sampling=[];
0221                 obj.resp=[];
0222                 obj.grad=[];
0223             <span class="keyword">elseif</span> nargin==2
0224                 <span class="keyword">switch</span> type
0225                     <span class="keyword">case</span> <span class="string">'Sampling'</span>
0226                         obj.samplingN=obj.sampling;
0227                     <span class="keyword">case</span> <span class="string">'Resp'</span>
0228                         obj.respN=obj.resp;
0229                     <span class="keyword">case</span> <span class="string">'Grad'</span>
0230                         obj.gradN=obj.grad;
0231                 <span class="keyword">end</span>
0232             <span class="keyword">end</span>
0233         <span class="keyword">end</span>
0234         <span class="comment">%ordering data (for manipulating nd-arrays)</span>
0235         <a name="_sub17" href="#_subfunctions" class="code">function dataOut=orderData(obj,dataIn,type)</a>
0236             <span class="keyword">switch</span> type
0237                 <span class="keyword">case</span> <span class="string">'sampleIn'</span>
0238                     <span class="comment">%size of the input data</span>
0239                     obj.sizeNonSample=[size(dataIn,1),size(dataIn,2),size(dataIn,3)];
0240                     <span class="comment">%in the case of nd-array</span>
0241                     <span class="keyword">if</span> obj.sizeNonSample(3)&gt;1
0242                         dataOut=reshape(dataIn,[ obj.sizeNonSample(1)*obj.sizeNonSample(2),obj.sizeNonSample(3),1]);
0243                     <span class="keyword">else</span>
0244                         dataOut=dataIn;
0245                     <span class="keyword">end</span>
0246                 <span class="keyword">case</span> <span class="string">'sampleOut'</span>
0247                     <span class="keyword">if</span> obj.sizeNonSample(3)&gt;1
0248                         dataOut=reshape(dataIn,[ obj.sizeNonSample(1),obj.sizeNonSample(2),obj.sizeNonSample(3)]);
0249                     <span class="keyword">else</span>
0250                         dataOut=dataIn;
0251                     <span class="keyword">end</span>
0252                 <span class="keyword">case</span> <span class="string">'respOut'</span>
0253                     <span class="keyword">if</span> obj.sizeNonSample(3)&gt;1
0254                         dataOut=reshape(dataIn,[ obj.sizeNonSample(1),obj.sizeNonSample(2)]);
0255                     <span class="keyword">else</span>
0256                         dataOut=dataIn;
0257                     <span class="keyword">end</span>
0258                 <span class="keyword">case</span> <span class="string">'gradOut'</span>
0259                     <span class="keyword">if</span> obj.sizeNonSample(3)&gt;1
0260                         dataOut=reshape(dataIn,[ obj.sizeNonSample(1),obj.sizeNonSample(2),obj.sizeNonSample(3)]);
0261                     <span class="keyword">else</span>
0262                         dataOut=dataIn;
0263                     <span class="keyword">end</span>
0264             <span class="keyword">end</span>
0265         <span class="keyword">end</span>
0266         <span class="comment">%Normalization of the input data</span>
0267         <a name="_sub18" href="#_subfunctions" class="code">function dataOut=normInputData(obj,type,dataIn)</a>
0268             <span class="keyword">if</span> obj.confMeta.normOn
0269                 <span class="comment">%preparing data structures</span>
0270                 infoDataS=obj.norm.sampling;
0271                 infoDataR=obj.norm.resp;
0272                 <span class="comment">%for various situations</span>
0273                 <span class="keyword">switch</span> type
0274                     <span class="keyword">case</span> <span class="string">'initSamplePts'</span>
0275                         [obj.samplingN,infoDataS]=<a href="../GRENAT/src/various/NormRenorm.html" class="code" title="function [out,infoData]=NormRenorm(in,type,infoData)">NormRenorm</a>(obj.sampling,<span class="string">'norm'</span>);
0276                         obj.normMeanS=infoDataS.mean;
0277                         obj.normStdS=infoDataS.std;
0278                         obj.normSamplePtsIn=true;
0279                     <span class="keyword">case</span> <span class="string">'initResp'</span>
0280                         [obj.respN,infoDataR]=<a href="../GRENAT/src/various/NormRenorm.html" class="code" title="function [out,infoData]=NormRenorm(in,type,infoData)">NormRenorm</a>(obj.resp,<span class="string">'norm'</span>);
0281                         obj.normMeanR=infoDataR.mean;
0282                         obj.normStdR=infoDataR.std;
0283                         obj.normRespIn=true;
0284                     <span class="keyword">case</span> <span class="string">'SamplePts'</span>
0285                         dataOut=<a href="../GRENAT/src/various/NormRenorm.html" class="code" title="function [out,infoData]=NormRenorm(in,type,infoData)">NormRenorm</a>(dataIn,<span class="string">'norm'</span>,infoDataS);
0286                     <span class="keyword">case</span> <span class="string">'Resp'</span>
0287                         dataOut=<a href="../GRENAT/src/various/NormRenorm.html" class="code" title="function [out,infoData]=NormRenorm(in,type,infoData)">NormRenorm</a>(dataIn,<span class="string">'norm'</span>,infoDataR);
0288                     <span class="keyword">case</span> <span class="string">'Grad'</span>
0289                         <span class="keyword">if</span> ~isempty(dataIn)
0290                             dataOut=<a href="../GRENAT/src/various/NormRenormG.html" class="code" title="function [out]=NormRenormG(in,type,infoDataS,infoDataR)">NormRenormG</a>(dataIn,<span class="string">'norm'</span>,infoDataS,infoDataR);
0291                         <span class="keyword">else</span>
0292                             dataOut=[];
0293                         <span class="keyword">end</span>
0294                 <span class="keyword">end</span>
0295             <span class="keyword">else</span>
0296                 <span class="keyword">if</span> nargin&gt;2
0297                     dataOut=dataIn;
0298                 <span class="keyword">end</span>
0299             <span class="keyword">end</span>
0300         <span class="keyword">end</span>
0301         <span class="comment">%ReNormalization of the input data</span>
0302         <a name="_sub19" href="#_subfunctions" class="code">function dataOut=reNormInputData(obj,type,dataIn)</a>
0303             <span class="keyword">if</span> obj.confMeta.normOn
0304                 <span class="comment">%preparing data structures</span>
0305                 infoDataS=obj.norm.sampling;
0306                 infoDataR=obj.norm.resp;
0307                 <span class="comment">%for various situations</span>
0308                 <span class="keyword">switch</span> type
0309                     <span class="keyword">case</span> <span class="string">'SamplePts'</span>
0310                         dataOut=<a href="../GRENAT/src/various/NormRenorm.html" class="code" title="function [out,infoData]=NormRenorm(in,type,infoData)">NormRenorm</a>(dataIn,<span class="string">'renorm'</span>,infoDataS);
0311                     <span class="keyword">case</span> <span class="string">'Resp'</span>
0312                         dataOut=<a href="../GRENAT/src/various/NormRenorm.html" class="code" title="function [out,infoData]=NormRenorm(in,type,infoData)">NormRenorm</a>(dataIn,<span class="string">'renorm'</span>,infoDataR);
0313                     <span class="keyword">case</span> <span class="string">'Grad'</span>
0314                         dataOut=<a href="../GRENAT/src/various/NormRenormG.html" class="code" title="function [out]=NormRenormG(in,type,infoDataS,infoDataR)">NormRenormG</a>(dataIn,<span class="string">'renorm'</span>,infoDataS,infoDataR);
0315                 <span class="keyword">end</span>
0316             <span class="keyword">else</span>
0317                 <span class="keyword">if</span> nargin&gt;2
0318                     dataOut=dataIn;
0319                 <span class="keyword">end</span>
0320             <span class="keyword">end</span>
0321         <span class="keyword">end</span>
0322         <span class="comment">%reset normalisation state</span>
0323         <a name="_sub20" href="#_subfunctions" class="code">function resetNorm(obj)</a>
0324             obj.normSamplePtsIn=false;
0325             obj.normRespIn=false;
0326         <span class="keyword">end</span>
0327         <span class="comment">%check missing data</span>
0328         <a name="_sub21" href="#_subfunctions" class="code">function checkMissingData(obj)</a>
0329             <span class="comment">%Check input data (find missing data)</span>
0330             obj.confMeta.miss=<a href="../GRENAT/src/various/CheckInputData.html" class="code" title="function [ret]=CheckInputData(sampling,resp,grad)">CheckInputData</a>(obj.samplingN,obj.respN,obj.gradN);
0331             obj.runMissingData=false;
0332         <span class="keyword">end</span>
0333         <span class="comment">%define the configuration for the display</span>
0334         <a name="_sub22" href="#_subfunctions" class="code">function defineDisp(obj,varargin)</a>
0335             <span class="comment">% look up the previous value</span>
0336             obj.confDisp.conf(varargin{:});
0337         <span class="keyword">end</span>
0338         <span class="comment">%train the metamodel</span>
0339         <a name="_sub23" href="#_subfunctions" class="code">function train(obj)</a>
0340             <span class="comment">%normalization of the input data</span>
0341             <a href="#_sub19" class="code" title="subfunction dataOut=normInputData(obj,type,dataIn)">normInputData</a>(obj,<span class="string">'initSamplePts'</span>);
0342             <a href="#_sub19" class="code" title="subfunction dataOut=normInputData(obj,type,dataIn)">normInputData</a>(obj,<span class="string">'initResp'</span>);
0343             obj.gradN=<a href="#_sub19" class="code" title="subfunction dataOut=normInputData(obj,type,dataIn)">normInputData</a>(obj,<span class="string">'Grad'</span>,obj.grad);
0344             <span class="comment">%check if data are missing</span>
0345             <a href="#_sub22" class="code" title="subfunction checkMissingData(obj)">checkMissingData</a>(obj);
0346             <span class="comment">%store normalization data</span>
0347             obj.confMeta.norm=obj.norm;
0348             <span class="comment">%train surrogate model</span>
0349             obj.dataTrain=<a href="../GRENAT/src/surrogate/BuildMeta.html" class="code" title="function [outMeta]=BuildMeta(samplingIn,respIn,gradIn,metaData)">BuildMeta</a>(obj.samplingN,obj.respN,obj.gradN,obj.confMeta);
0350             <span class="comment">%save estimate parameters</span>
0351             <span class="keyword">if</span> <a href="#_sub43" class="code" title="subfunction isF=isfield(obj,field)">isfield</a>(obj.dataTrain.build,<span class="string">'para'</span>);
0352                 obj.confMeta.definePara(obj.dataTrain.build.para);
0353                 obj.confMeta.updatePara;
0354             <span class="keyword">end</span>
0355             <span class="comment">%change state of flags</span>
0356             obj.runTrain=false;
0357             obj.runErr=true;
0358             
0359             <span class="comment">% keyboard</span>
0360             <span class="comment">% if metaData.norm.on&amp;&amp;~isempty(metaData.norm.resp.std)</span>
0361             <span class="comment">%     ret.build.sig2=ret.build.sig2*metaData.norm.resp.std^2;</span>
0362             <span class="comment">% end</span>
0363         <span class="keyword">end</span>
0364         <span class="comment">%update the metamodel by adding sample points and associated</span>
0365         <span class="comment">%responses and gradients</span>
0366         <a name="_sub24" href="#_subfunctions" class="code">function update(obj,samplingIn,respIn,gradIn,paraFind,varargin)</a>
0367             <span class="comment">%add data</span>
0368             <span class="keyword">if</span> ~isempty(samplingIn)
0369                 obj.sampling=samplingIn;
0370                 obj.resp=respIn;
0371                 obj.grad=gradIn;
0372                 <span class="comment">%initialize flags</span>
0373                 <a href="#_sub14" class="code" title="subfunction initRunTrain(obj,flag)">initRunTrain</a>(obj,true);
0374                 <a href="#_sub16" class="code" title="subfunction initRunEval(obj,flag)">initRunEval</a>(obj,true);
0375                 <span class="comment">%change status of the estimation of the parameters</span>
0376                 obj.confMeta.conf(<span class="string">'estimOn'</span>,paraFind);
0377                 <span class="comment">%deal with additional options</span>
0378                 <span class="keyword">if</span> nargin&gt;5;
0379                     obj.confMeta.conf(varargin{:});
0380                 <span class="keyword">end</span>
0381                 <span class="comment">%train the metamodel</span>
0382                 obj.train();
0383             <span class="keyword">end</span>
0384         <span class="keyword">end</span>
0385         <span class="comment">%evaluate the metamodel</span>
0386         <a name="_sub25" href="#_subfunctions" class="code">function [Z,GZ,variance]=eval(obj,nonsamplePts,Verb)</a>
0387             <span class="keyword">if</span> nargin&lt;3;Verb=true;<span class="keyword">end</span>
0388             <span class="comment">%check if the metamodel has been already trained</span>
0389             <span class="keyword">if</span> obj.runTrain;<a href="#_sub24" class="code" title="subfunction train(obj)">train</a>(obj);<span class="keyword">end</span>
0390             <span class="comment">%store non sample points</span>
0391             <span class="keyword">if</span> nargin&gt;1;obj.nonsamplePts=nonsamplePts;<span class="keyword">end</span>
0392             <span class="comment">%evaluation of the metamodels</span>
0393             <span class="keyword">if</span> obj.runEval
0394                 <span class="comment">%normalization of the input data</span>
0395                 obj.nonsamplePtsN=<a href="#_sub19" class="code" title="subfunction dataOut=normInputData(obj,type,dataIn)">normInputData</a>(obj,<span class="string">'SamplePts'</span>,obj.nonsamplePtsOrder);
0396                 <span class="comment">%evaluation of the metamodel</span>
0397                 [K]=<a href="../GRENAT/src/surrogate/EvalMeta.html" class="code" title="function [Z]=EvalMeta(evalSample,dataTrain,metaConf,Verb)">EvalMeta</a>(obj.nonsamplePtsN,obj.dataTrain,obj.confMeta,Verb);
0398                 <span class="comment">%store data from the evaluation</span>
0399                 obj.nonsampleRespN=K.Z;
0400                 obj.nonsampleGradN=K.GZ;
0401                 obj.nonsampleVarOrder=K.var;
0402                 <span class="comment">%renormalization of the data</span>
0403                 obj.nonsampleRespOrder=<a href="#_sub20" class="code" title="subfunction dataOut=reNormInputData(obj,type,dataIn)">reNormInputData</a>(obj,<span class="string">'Resp'</span>,obj.nonsampleRespN);
0404                 obj.nonsampleGradOrder=<a href="#_sub20" class="code" title="subfunction dataOut=reNormInputData(obj,type,dataIn)">reNormInputData</a>(obj,<span class="string">'Grad'</span>,obj.nonsampleGradN);
0405                 <span class="comment">%update flags</span>
0406                 obj.runEval=false;
0407                 obj.runErr=true;
0408             <span class="keyword">end</span>
0409             <span class="comment">%extract unnormalized data</span>
0410             Z=obj.nonsampleResp;
0411             GZ=obj.nonsampleGrad;
0412             variance=obj.nonsampleVar;
0413         <span class="keyword">end</span>
0414         <span class="comment">%check interpolation</span>
0415         <a name="_sub26" href="#_subfunctions" class="code">function [ZI,detI]=evalInfill(obj,nonsamplePts,Verb)</a>
0416             <span class="keyword">if</span> nargin&lt;3;Verb=true;<span class="keyword">end</span>
0417             <span class="comment">%store non sample points</span>
0418             <span class="keyword">if</span> nargin&gt;1;obj.nonsamplePts=nonsamplePts;<span class="keyword">end</span>
0419             <span class="comment">%evaluation</span>
0420             obj.eval([],Verb);
0421             <span class="comment">%smallest response</span>
0422             respMin=min(obj.resp);
0423             <span class="comment">%computation of infill criteria</span>
0424             ZI=[];
0425             <span class="keyword">if</span> ~isempty(obj.nonsampleVar)
0426                 [ZI,detI]=<a href="../GRENAT/src/crit/InfillCrit.html" class="code" title="function [ZI,detInfill]=InfillCrit(respMin,Z,varZ,infillData)">InfillCrit</a>(respMin,obj.nonsampleResp,obj.nonsampleVar,obj.confMeta.infill);
0427             <span class="keyword">end</span>
0428         <span class="keyword">end</span>
0429         <span class="comment">%check interpolation</span>
0430         <a name="_sub27" href="#_subfunctions" class="code">function [statusR,statusG]=checkInterp(obj)</a>
0431             statusG=true;
0432             <span class="comment">%evaluation of the approximation at the sample points</span>
0433             [Z,GZ]=obj.eval(obj.sampling);
0434             <span class="comment">%check interpolation</span>
0435             statusR=<a href="../GRENAT/src/various/checkInterpRG.html" class="code" title="function statusI=checkInterpRG(ZRef,ZApp,type,critR,critG)">checkInterpRG</a>(obj.resp,Z,<span class="string">'resp'</span>);
0436             <span class="keyword">if</span>  obj.dataTrain.used.availGrad
0437                 statusG=<a href="../GRENAT/src/various/checkInterpRG.html" class="code" title="function statusI=checkInterpRG(ZRef,ZApp,type,critR,critG)">checkInterpRG</a>(obj.grad,GZ,<span class="string">'grad'</span>);
0438             <span class="keyword">end</span>
0439         <span class="keyword">end</span>
0440         <span class="comment">%evaluate the CI of the metamodel</span>
0441         <a name="_sub28" href="#_subfunctions" class="code">function [ci68,ci95,ci99]=evalCI(obj,nonsamplePts)</a>
0442             <span class="comment">%store non sample points</span>
0443             <span class="keyword">if</span> nargin&gt;1;obj.nonsamplePts=nonsamplePts;<span class="keyword">end</span>
0444             <span class="comment">%eval the CI</span>
0445             [ci68,ci95,ci99]=<a href="../GRENAT/src/crit/BuildCI.html" class="code" title="function [ci68,ci95,ci99]=BuildCI(ZZ,var)">BuildCI</a>(obj.nonsampleResp,obj.nonsampleVar);
0446             obj.nonsampleCI.ci68=ci68;
0447             obj.nonsampleCI.ci95=ci95;
0448             obj.nonsampleCI.ci99=ci99;
0449         <span class="keyword">end</span>
0450         <span class="comment">%extract CI</span>
0451         <a name="_sub29" href="#_subfunctions" class="code">function [ci68,ci95,ci99]=CI(obj,nonsamplePts)</a>
0452             <span class="comment">%store non sample points</span>
0453             <span class="keyword">if</span> nargin&gt;1;obj.nonsamplePts=nonsamplePts;<span class="keyword">end</span>
0454             <span class="comment">%eval the CI</span>
0455             [ci68,ci95,ci99]=<a href="../GRENAT/src/crit/BuildCI.html" class="code" title="function [ci68,ci95,ci99]=BuildCI(ZZ,var)">BuildCI</a>(obj.nonsampleResp,obj.nonsampleVar);
0456             obj.nonsampleCI.ci68=ci68;
0457             obj.nonsampleCI.ci95=ci95;
0458             obj.nonsampleCI.ci99=ci99;
0459         <span class="keyword">end</span>
0460         <span class="comment">%compute and show the errors of the metamodel (using reference if it is</span>
0461         <span class="comment">%available)</span>
0462         <a name="_sub30" href="#_subfunctions" class="code">function errCalc(obj)</a>
0463             obj.err=<a href="../GRENAT/src/crit/critErrDisp.html" class="code" title="function [err,errV,errNAME]=critErrDisp(Zap,Zref,data)">critErrDisp</a>(obj.nonsampleResp,obj.respRef,obj.dataTrain.build);
0464             obj.runErr=false;
0465         <span class="keyword">end</span>
0466         <span class="comment">%define the reference surface</span>
0467         <a name="_sub31" href="#_subfunctions" class="code">function defineRef(obj,varargin)</a>
0468             <span class="comment">%accepted keyword</span>
0469             keyOk={<span class="string">'sampleRef'</span>,<span class="string">'respRef'</span>,<span class="string">'gradRef'</span>};
0470             <span class="comment">%two kind of input variables list (with keywords or not)</span>
0471             <span class="comment">%depend on the first argument: double for classical list of</span>
0472             <span class="comment">%argument or string if the use of keywords</span>
0473             execOk=true;
0474             <span class="keyword">if</span> isa(varargin{1},<span class="string">'double'</span>)
0475                 <span class="keyword">if</span> nargin&gt;1;obj.sampleRef=varargin{1};obj.nonsamplePts=varargin{1};<span class="keyword">end</span>
0476                 <span class="keyword">if</span> nargin&gt;2;obj.respRef=varargin{2};<span class="keyword">end</span>
0477                 <span class="keyword">if</span> nargin&gt;3;obj.gradRef=varargin{3};<span class="keyword">end</span>
0478             <span class="keyword">elseif</span> isa(varargin{1},<span class="string">'char'</span>)
0479                 <span class="keyword">if</span> mod(nargin-1,2)==0
0480                     <span class="keyword">for</span> itV=1:2:nargin-1
0481                         <span class="comment">%load key and associated value</span>
0482                         keyTxt=varargin{itV};
0483                         keyVal=varargin{itV+1};
0484                         <span class="comment">%check if the keyword is usable</span>
0485                         <span class="keyword">if</span> ismember(keyTxt,keyOk)
0486                             <span class="comment">%store the data</span>
0487                             obj.(keyTxt)=keyVal;
0488                         <span class="keyword">else</span>
0489                             execOk=false;
0490                         <span class="keyword">end</span>
0491                     <span class="keyword">end</span>
0492                 <span class="keyword">else</span>
0493                     execOk=false;
0494                 <span class="keyword">end</span>
0495             <span class="keyword">else</span>
0496                 execOk=false;
0497             <span class="keyword">end</span>
0498             <span class="comment">%display error message if wrong syntax</span>
0499             <span class="keyword">if</span> ~execOk
0500                 fprintf(<span class="string">'Wrong syntax for the method\n'</span>)
0501                 fprintf(<span class="string">'defineref(sampleRef,respRef,gradRef)\n'</span>)
0502                 fprintf(<span class="string">'or defineref(''sampleRef'',val1,''respRef'',val2,''gradRef'',val3)\n'</span>)
0503             <span class="keyword">end</span>
0504         <span class="keyword">end</span>
0505         <span class="comment">%check if all data is available for displaying the reference</span>
0506         <span class="comment">%surface and gradients</span>
0507         <a name="_sub32" href="#_subfunctions" class="code">function [okAll,okSample,okResp,okGrad]=checkRef(obj)</a>
0508             okSample=false;
0509             okResp=false;
0510             okGrad=false;
0511             nbSRef(1)=size(obj.sampleRef,1);
0512             nbSRef(2)=size(obj.sampleRef,2);
0513             nbSRef(3)=size(obj.sampleRef,3);
0514             nbRRef(1)=size(obj.respRef,1);
0515             nbRRef(2)=size(obj.respRef,2);
0516             nbRRef(3)=size(obj.respRef,3);
0517             nbGRef(1)=size(obj.gradRef,1);
0518             nbGRef(2)=size(obj.gradRef,2);
0519             nbGRef(3)=size(obj.gradRef,3);
0520             <span class="keyword">if</span> sum(nbSRef(:))~=0
0521                 okSample=true;
0522                 <span class="keyword">if</span> nbSRef(1)==nbRRef(1)
0523                     okResp=true;
0524                 <span class="keyword">end</span>
0525                 <span class="keyword">if</span> nbGRef(3)==1
0526                     <span class="keyword">if</span> nbGRef(1)==nbSRef(1)&amp;&amp;nbGRef(2)==nbSRef(2)
0527                         okGrad=true;
0528                     <span class="keyword">end</span>
0529                 <span class="keyword">elseif</span> nbGRef(3)==nbSRef(2)&amp;&amp;nbGRef(1)==nbSRef(1)
0530                     okGrad=true;
0531                 <span class="keyword">elseif</span> all(nbGRef==nbSRef)
0532                     okGrad=true;
0533                 <span class="keyword">end</span>
0534             <span class="keyword">end</span>
0535             okAll=okSample&amp;&amp;okResp&amp;&amp;okGrad;
0536             <span class="comment">%display error messages</span>
0537             <span class="keyword">if</span> ~okSample;<a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>(<span class="string">'&gt;&gt; Wrong definition of the reference sample points\n'</span>);<span class="keyword">end</span>
0538             <span class="keyword">if</span> ~okResp;<a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>(<span class="string">'&gt;&gt; Wrong definition of the reference responses\n'</span>);<span class="keyword">end</span>
0539             <span class="keyword">if</span> ~okGrad;<a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>(<span class="string">'&gt;&gt; Wrong definition of the reference gradients\n'</span>);<span class="keyword">end</span>
0540         <span class="keyword">end</span>
0541         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0542         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0543         <span class="comment">%define properties</span>
0544         <a name="_sub33" href="#_subfunctions" class="code">function conf(obj,varargin)</a>
0545             <span class="comment">%list properties</span>
0546             listProp=properties(obj);
0547             okConf=false;
0548             <span class="comment">%if a input variable is specified</span>
0549             <span class="keyword">if</span> nargin&gt;2
0550                 <span class="comment">%if the number of input argument is even</span>
0551                 <span class="keyword">if</span>  mod(nargin-1,2)==0
0552                     <span class="comment">%along the argument</span>
0553                     <span class="keyword">for</span> itV=1:2:nargin-1
0554                         <span class="comment">%extract keyword and associated value</span>
0555                         keyW=varargin{itV};
0556                         keyV=varargin{itV+1};
0557                         <span class="comment">%if the first argument is a string</span>
0558                         <span class="keyword">if</span> isa(varargin{1},<span class="string">'char'</span>)
0559                             <span class="comment">%check if the keyword is acceptable</span>
0560                             <span class="keyword">if</span> ismember(keyW,listProp)
0561                                 okConf=true;
0562                                 obj.(keyW)=keyV;
0563                             <span class="keyword">else</span>
0564                                 fprintf(<span class="string">'&gt;&gt; Wrong keyword ''%s''\n'</span>,keyW);
0565                             <span class="keyword">end</span>
0566                         <span class="keyword">end</span>
0567                     <span class="keyword">end</span>
0568                 <span class="keyword">end</span>
0569                 <span class="keyword">if</span> ~okConf
0570                     <a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>(<span class="string">'\nWrong syntax used for conf method\n'</span>);
0571                     <a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>(<span class="string">'use: conf(''key1'',val1,''key2'',val2...)\n'</span>);
0572                     <a href="../GRENAT/src/various/Gfprintf.html" class="code" title="function nbT = Gfprintf(varargin)">Gfprintf</a>(<span class="string">'\nList of the available keywords:\n'</span>);
0573                     <a href="#_sub45" class="code" title="subfunction dispTableTwoColumnsStruct(tableFiedIn,structIn)">dispTableTwoColumnsStruct</a>(listProp,obj.infoProp);
0574                 <span class="keyword">end</span>
0575             <span class="keyword">else</span>
0576                 fprintf(<span class="string">'Current configuration\n'</span>);
0577                 disp(obj);
0578             <span class="keyword">end</span>
0579         <span class="keyword">end</span>
0580         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0581         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0582         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0583         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0584         <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0585         <span class="comment">%display the surrogate model</span>
0586         <a name="_sub34" href="#_subfunctions" class="code">function show(obj,varargin)</a>
0587             <span class="comment">%depending of the kind of data</span>
0588             <span class="keyword">if</span> obj.sizeNonSample(3)==2
0589                 obj.confDisp.conf(<span class="string">'d3'</span>,true,<span class="string">'contour'</span>,true);
0590                 <span class="comment">%if argument</span>
0591                 <span class="keyword">if</span> nargin&gt;1;obj.confDisp.conf(varargin{:});<span class="keyword">end</span>
0592                 <a href="#_sub37" class="code" title="subfunction show2D(obj)">show2D</a>(obj);
0593             <span class="keyword">elseif</span> obj.sizeNonSample(3)==1
0594                 obj.confDisp.conf(<span class="string">'d3'</span>,false,<span class="string">'d2'</span>,false);
0595                 <span class="comment">%if argument</span>
0596                 <span class="keyword">if</span> nargin&gt;1;obj.confDisp.conf(varargin{:});<span class="keyword">end</span>
0597                 <a href="#_sub36" class="code" title="subfunction show1D(obj)">show1D</a>(obj);
0598             <span class="keyword">end</span>
0599         <span class="keyword">end</span>
0600         <a name="_sub35" href="#_subfunctions" class="code">function show1D(obj)</a>
0601             figure;
0602             <span class="comment">%depend if the reference is available or not</span>
0603             <span class="keyword">if</span> <a href="#_sub33" class="code" title="subfunction [okAll,okSample,okResp,okGrad]=checkRef(obj)">checkRef</a>(obj)
0604                 obj.nbSubplot=231;
0605                 subplot(obj.nbSubplot);
0606                 obj.confDisp.conf(<span class="string">'samplePts'</span>,true,<span class="string">'sampleGrad'</span>,false);
0607                 <a href="#_sub38" class="code" title="subfunction showRespRef(obj)">showRespRef</a>(obj);
0608                 obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot)
0609                 <span class="comment">%remove display of sample points</span>
0610                 obj.confDisp.conf(<span class="string">'samplePts'</span>,true,<span class="string">'sampleGrad'</span>,true);
0611                 <a href="#_sub39" class="code" title="subfunction showGradRef(obj,nbG)">showGradRef</a>(obj);
0612                 obj.nbSubplot=obj.nbSubplot+1;
0613             <span class="keyword">else</span>
0614                 obj.nbSubplot=221;
0615             <span class="keyword">end</span>
0616             obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot);
0617             obj.confDisp.conf(<span class="string">'samplePts'</span>,true,<span class="string">'sampleGrad'</span>,false);
0618             <a href="#_sub40" class="code" title="subfunction showResp(obj)">showResp</a>(obj);
0619             obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot);
0620             <span class="comment">%remove display of sample points</span>
0621             obj.confDisp.conf(<span class="string">'samplePts'</span>,true,<span class="string">'sampleGrad'</span>,true);
0622             <a href="#_sub41" class="code" title="subfunction showGrad(obj,nbG)">showGrad</a>(obj);
0623             obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot);
0624             <a href="#_sub42" class="code" title="subfunction showCI(obj,ciVal,nonsamplePts)">showCI</a>(obj,[]);
0625         <span class="keyword">end</span>
0626         <a name="_sub36" href="#_subfunctions" class="code">function show2D(obj)</a>
0627             figure;
0628             <span class="comment">%depend if the reference is available or not</span>
0629             <span class="keyword">if</span> <a href="#_sub33" class="code" title="subfunction [okAll,okSample,okResp,okGrad]=checkRef(obj)">checkRef</a>(obj)
0630                 obj.nbSubplot=331;
0631                 subplot(obj.nbSubplot);
0632                 obj.confDisp.conf(<span class="string">'samplePts'</span>,true);
0633                 <a href="#_sub38" class="code" title="subfunction showRespRef(obj)">showRespRef</a>(obj);
0634                 obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot)
0635                 <span class="comment">%remove display of sample points</span>
0636                 obj.confDisp.conf(<span class="string">'samplePts'</span>,false,<span class="string">'sampleGrad'</span>,false);
0637                 <a href="#_sub39" class="code" title="subfunction showGradRef(obj,nbG)">showGradRef</a>(obj,1);
0638                 obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot)
0639                 <a href="#_sub39" class="code" title="subfunction showGradRef(obj,nbG)">showGradRef</a>(obj,2);
0640             <span class="keyword">else</span>
0641                 obj.nbSubplot=231;
0642             <span class="keyword">end</span>
0643             obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot);
0644             obj.confDisp.conf(<span class="string">'samplePts'</span>,true);
0645             <a href="#_sub40" class="code" title="subfunction showResp(obj)">showResp</a>(obj);
0646             obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot);
0647             <span class="comment">%remove display of sample points</span>
0648             obj.confDisp.conf(<span class="string">'samplePts'</span>,false,<span class="string">'sampleGrad'</span>,false,<span class="string">'gridGrad'</span>,false);
0649             <a href="#_sub41" class="code" title="subfunction showGrad(obj,nbG)">showGrad</a>(obj,1);
0650             obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot);
0651             <a href="#_sub41" class="code" title="subfunction showGrad(obj,nbG)">showGrad</a>(obj,2);
0652             obj.nbSubplot=obj.nbSubplot+1;subplot(obj.nbSubplot);
0653             <a href="#_sub42" class="code" title="subfunction showCI(obj,ciVal,nonsamplePts)">showCI</a>(obj,[]);
0654         <span class="keyword">end</span>
0655         <span class="comment">%display the reference surface</span>
0656         <a name="_sub37" href="#_subfunctions" class="code">function showRespRef(obj)</a>
0657             obj.confDisp.title=(<span class="string">'Reference'</span>);
0658             <a href="../GRENAT/src/disp/displaySurrogate.html" class="code" title="function figHandle=displaySurrogate(gridXY,Z,sampling,resp,grad,dispData)">displaySurrogate</a>(obj.sampleRef,obj.respRef,obj.sampling,obj.resp,obj.grad,obj.confDisp);
0659         <span class="keyword">end</span>
0660         <span class="comment">%display the reference gradients surface</span>
0661         <a name="_sub38" href="#_subfunctions" class="code">function showGradRef(obj,nbG)</a>
0662             <span class="comment">%default value</span>
0663             <span class="keyword">if</span> nargin==1;nbG=1:size(obj.nonsampleGrad,3);<span class="keyword">end</span>
0664             <span class="keyword">for</span> itG=1:numel(nbG)
0665                 obj.confDisp.title=([<span class="string">'Gradients Reference /x'</span> num2str(nbG(itG))]);
0666                 <a href="../GRENAT/src/disp/displaySurrogate.html" class="code" title="function figHandle=displaySurrogate(gridXY,Z,sampling,resp,grad,dispData)">displaySurrogate</a>(obj.sampleRef,obj.gradRef(:,:,nbG(itG)),obj.sampling,obj.resp,obj.grad,obj.confDisp);
0667             <span class="keyword">end</span>
0668         <span class="keyword">end</span>
0669         <span class="comment">%display the response approximated by the metamodel</span>
0670         <a name="_sub39" href="#_subfunctions" class="code">function showResp(obj)</a>
0671             obj.confDisp.title=(<span class="string">'Approximated responses'</span>);
0672             <a href="../GRENAT/src/disp/displaySurrogate.html" class="code" title="function figHandle=displaySurrogate(gridXY,Z,sampling,resp,grad,dispData)">displaySurrogate</a>(obj.nonsamplePts,obj.nonsampleResp,obj.sampling,obj.resp,obj.grad,obj.confDisp);
0673         <span class="keyword">end</span>
0674         <span class="comment">%display the gradients approximated by the metamodel</span>
0675         <a name="_sub40" href="#_subfunctions" class="code">function showGrad(obj,nbG)</a>
0676             <span class="comment">%default value</span>
0677             <span class="keyword">if</span> nargin==1;nbG=1:size(obj.nonsampleGrad,3);<span class="keyword">end</span>
0678             <span class="keyword">for</span> itG=1:numel(nbG)
0679                 obj.confDisp.title=([<span class="string">'Approximated gradients /x'</span> num2str(nbG(itG))]);
0680                 <a href="../GRENAT/src/disp/displaySurrogate.html" class="code" title="function figHandle=displaySurrogate(gridXY,Z,sampling,resp,grad,dispData)">displaySurrogate</a>(obj.nonsamplePts,obj.nonsampleGrad(:,:,nbG(itG)),obj.sampling,obj.resp,obj.grad,obj.confDisp);
0681             <span class="keyword">end</span>
0682         <span class="keyword">end</span>
0683         <span class="comment">%display the confidence intervals approximated by the metamodel</span>
0684         <a name="_sub41" href="#_subfunctions" class="code">function showCI(obj,ciVal,nonsamplePts)</a>
0685             <span class="comment">%type of confidence intervals</span>
0686             ciOk=false;ciValDef=95;
0687             <span class="keyword">if</span> nargin&gt;1;<span class="keyword">if</span> ~isempty(ciVal);<span class="keyword">if</span> ismember(ciVal,[68,95,99]);ciOk=true;<span class="keyword">end</span>, <span class="keyword">end</span>, <span class="keyword">end</span>
0688             <span class="keyword">if</span> ~ciOk;ciVal=ciValDef;<span class="keyword">end</span>
0689             <span class="comment">%store non sample points</span>
0690             <span class="keyword">if</span> nargin&gt;2;obj.nonsamplePts=nonsamplePts;<span class="keyword">end</span>
0691             obj.confDisp.title=([num2str(ciVal) <span class="string">'% confidence intervals'</span>]);
0692             <span class="comment">%evaluation of the confidence interval</span>
0693             <a href="#_sub29" class="code" title="subfunction [ci68,ci95,ci99]=evalCI(obj,nonsamplePts)">evalCI</a>(obj);
0694             <span class="comment">%load data to display</span>
0695             ciDisp=obj.nonsampleCI.([<span class="string">'ci'</span> num2str(ciVal)]);
0696             <span class="comment">%display the CI</span>
0697             <a href="../GRENAT/src/disp/displaySurrogateCI.html" class="code" title="function displaySurrogateCI(Xpts,ic,dispData,Z)">displaySurrogateCI</a>(obj.nonsamplePts,ciDisp,obj.confDisp,obj.nonsampleResp);
0698         <span class="keyword">end</span>
0699         <span class="comment">%overload isfield</span>
0700         <a name="_sub42" href="#_subfunctions" class="code">function isF=isfield(obj,field)</a>
0701             isF=isprop(obj,field);
0702         <span class="keyword">end</span>
0703     <span class="keyword">end</span>
0704 <span class="keyword">end</span>
0705 
0706 
0707 
0708 
0709 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0710 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0711 <span class="comment">%function for declaring the purpose of each properties</span>
0712 <a name="_sub43" href="#_subfunctions" class="code">function info=affectTxtProp()</a>
0713 info.type=<span class="string">'Type of the surrogate model'</span>;
0714 info.sampling=<span class="string">'Coordinates of the sample points'</span>;
0715 info.resp=<span class="string">'Value(s) of the responses at the sample points'</span>;
0716 info.grad=<span class="string">'Value(s) of the gradients at the sample points'</span>;
0717 info.samplingN=<span class="string">'Normalized coordinates of the sample points'</span>;
0718 info.respN=<span class="string">'Value(s) of the normalized responses at the sample points'</span>;
0719 info.gradN=<span class="string">'Value(s) of the normalized gradients at the sample points'</span>;
0720 info.nonsamplePts=<span class="string">'Coordinates of the non-sample points'</span>;
0721 info.nonsampleResp=<span class="string">'Value(s) of the approximated responses calculated at the non-sample points'</span>;
0722 info.nonsampleGrad=<span class="string">'Value(s) of the approximated gradients calculated at the non-sample points'</span>;
0723 info.nonsamplePtsN=<span class="string">'Normalized coordinates of the  non-sample points'</span>;
0724 info.nonsampleRespN=<span class="string">'Value(s) of the normalized approximated responses calculated at the non-sample points'</span>;
0725 info.nonsampleGradN=<span class="string">'Value(s) of the normalized approximated gradients calculated at the non-sample points'</span>;
0726 info.nonsampleVar=<span class="string">'Value(s) of the variance calculated at the non-sample points'</span>;
0727 info.nonsampleCI=<span class="string">'Structure containing the bounds of the confidence intervals (68%, 95%, 99%)'</span>;
0728 info.nonsampleEI=<span class="string">'Value(s) of the expected improvment calculated at the non-sample points'</span>;
0729 info.norm=<span class="string">'Structure containing the normalization data'</span>;
0730 info.normMeanS=<span class="string">'Mean value of the sample points (vector)'</span>;
0731 info.normStdS=<span class="string">'Standard deviation of the sample points (vector)'</span>;
0732 info.normMeanR=<span class="string">'Mean value of the responses'</span>;
0733 info.normStdR=<span class="string">'Standard deviation of the responses'</span>;
0734 info.err=<span class="string">'Structure containing the values of the error criteria'</span>;
0735 info.sampleRef=<span class="string">'Array of the sample points used for the reference response surface'</span>;
0736 info.respRef=<span class="string">'Array of the responses of the reference response surface'</span>;
0737 info.gradRef=<span class="string">'Array of the gradients of the reference response surface'</span>;
0738 info.confMeta=<span class="string">'Class object (initMeta) containing information about the configuration (metamodel) (conf method for modifying it)'</span>;
0739 info.dataTrain=<span class="string">'Structures containing data about the training of the surrogate model'</span>;
0740 info.confDisp=<span class="string">'Class object (initDisp) containing information about the display (conf method for modifying it)'</span>;
0741 info.miss=<span class="string">'Structure Containing information about the missing data'</span>;
0742 <span class="keyword">end</span>
0743 
0744 <span class="comment">%function display table with two columns of text</span>
0745 <a name="_sub44" href="#_subfunctions" class="code">function dispTableTwoColumnsStruct(tableFiedIn,structIn)</a>
0746 <span class="comment">%size of every components in tableA</span>
0747 sizeA=cellfun(@numel,tableFiedIn);
0748 maxA=max(sizeA);
0749 <span class="comment">%space after each component</span>
0750 spaceA=maxA-sizeA+3;
0751 spaceTxt=<span class="string">' '</span>;
0752 <span class="comment">%display table</span>
0753 <span class="keyword">for</span> itT=1:numel(tableFiedIn)
0754     <span class="keyword">if</span> <a href="#_sub43" class="code" title="subfunction isF=isfield(obj,field)">isfield</a>(structIn,tableFiedIn{itT})
0755         fprintf(<span class="string">'%s%s%s\n'</span>,tableFiedIn{itT},spaceTxt(ones(1,spaceA(itT))),structIn.(tableFiedIn{itT}));
0756     <span class="keyword">end</span>
0757 <span class="keyword">end</span>
0758 <span class="keyword">end</span>
0759 
0760 <span class="comment">%function display table with two columns of text</span>
0761 <a name="_sub45" href="#_subfunctions" class="code">function dispTableTwoColumns(tableA,tableB)</a>
0762 <span class="comment">%size of every components in tableA</span>
0763 sizeA=cellfun(@numel,tableA);
0764 maxA=max(sizeA);
0765 <span class="comment">%space after each component</span>
0766 spaceA=maxA-sizeA+3;
0767 spaceTxt=<span class="string">' '</span>;
0768 <span class="comment">%display table</span>
0769 <span class="keyword">for</span> itT=1:numel(tableA)
0770     fprintf(<span class="string">'%s%s%s\n'</span>,tableA{itT},spaceTxt(ones(1,spaceA(itT))),tableB{itT});
0771 <span class="keyword">end</span>
0772 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 09-Feb-2017 16:13:09 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>