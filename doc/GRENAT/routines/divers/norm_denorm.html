<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of norm_denorm</title>
  <meta name="keywords" content="norm_denorm">
  <meta name="description" content="% fonction assurant la normalisation/denormalisation des donnees">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- ../../menu.html GRENAT --><!-- # routines --><!-- menu.html divers -->
<h1>norm_denorm
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>% fonction assurant la normalisation/denormalisation des donnees</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function [out,infos]=norm_denorm(in,type,infos) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">% fonction assurant la normalisation/denormalisation des donnees
% L. LAURENT -- 18/10/2011 -- laurent@lmt.ens-cachan.fr</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../GRENAT/routines/meta/cross_validate_krg_ckrg.html" class="code" title="function cv=cross_validate_krg_ckrg(data_block,meta,type)">cross_validate_krg_ckrg</a>	% Fonction assurant le calcul de diverses erreurs par validation croisee dans le cas du Krigeage/CoKrigeage</li><li><a href="../../../GRENAT/routines/meta/cross_validate_rbf.html" class="code" title="function [cv]=cross_validate_rbf(data_block,data,meta,type)">cross_validate_rbf</a>	% Fonction assurant le calcul de diverses erreurs par validation croisee dans le cas RBF/GFRB</li><li><a href="../../../GRENAT/routines/meta/eval_krg_ckrg.html" class="code" title="function [Z,GZ,variance,details]=eval_krg_ckrg(U,donnees,tir_part)">eval_krg_ckrg</a>	% Fonction assurant l'evaluation du metamodele de Krigeage ou de Cokrigeage</li><li><a href="../../../GRENAT/routines/meta/eval_rbf.html" class="code" title="function [Z,GZ,variance,details]=eval_rbf(U,data,tir_part)">eval_rbf</a>	%fonction permettant d'evaluer le metamodele RBF en un ensemble de pts donnes</li><li><a href="../../../GRENAT/routines/meta/meta_krg_ckrg.html" class="code" title="function [ret]=meta_krg_ckrg(tirages,eval,grad,meta,manq)">meta_krg_ckrg</a>	% fonction de construction des metamodeles de Krigeage et de Cokrigeage</li><li><a href="../../../GRENAT/routines/meta/meta_rbf.html" class="code" title="function ret=meta_rbf(tirages,eval,grad,meta,manq)">meta_rbf</a>	%fonction permettant de construire un metamodele Ã  l'aide de fonctions a</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%% fonction assurant la normalisation/denormalisation des donnees</span>
0002 <span class="comment">%% L. LAURENT -- 18/10/2011 -- laurent@lmt.ens-cachan.fr</span>
0003 
0004 <a name="_sub0" href="#_subfunctions" class="code">function [out,infos]=norm_denorm(in,type,infos)</a>
0005 
0006 <span class="comment">% nombre d'echantillons</span>
0007 nbs=size(in,1);
0008 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0009 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0010 <span class="comment">%traitement de tous le cas de figure</span>
0011 norm_data=false;norm_manq=false;
0012 <span class="keyword">if</span> nargin==3
0013     <span class="keyword">if</span> isfield(infos,<span class="string">'moy'</span>)
0014         <span class="keyword">if</span> ~isempty(infos.moy)
0015             norm_data=true;
0016         <span class="keyword">else</span>
0017             calc_para_norm=false;
0018         <span class="keyword">end</span>
0019     <span class="keyword">elseif</span> isfield(infos,<span class="string">'eval'</span>)
0020         norm_manq=infos.eval.on;
0021         calc_para_norm=true;
0022     <span class="keyword">elseif</span> isfield(infos,<span class="string">'moy'</span>)&amp;&amp;isfield(infos,<span class="string">'eval'</span>)
0023         <span class="keyword">if</span> ~isempty(infos.moy)
0024             norm_data=true;
0025         <span class="keyword">else</span>
0026              calc_para_norm=false;
0027         <span class="keyword">end</span>
0028     <span class="keyword">end</span>
0029 <span class="keyword">else</span>
0030      calc_para_norm=true;
0031 <span class="keyword">end</span>
0032 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0033 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0034 <span class="keyword">if</span> nargout==2
0035     extr_infos=true;
0036 <span class="keyword">else</span>
0037     extr_infos=false;
0038 <span class="keyword">end</span>
0039 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0040 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0041 
0042 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0043 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0044 <span class="comment">%normalisation//denormalisation</span>
0045 <span class="keyword">switch</span> type
0046     <span class="keyword">case</span> <span class="string">'norm'</span>
0047         <span class="comment">%dans le cas de données manquantes, on retire les données à NaN</span>
0048         <span class="keyword">if</span> norm_manq
0049             inm=in(infos.eval.ix_dispo);
0050         <span class="keyword">else</span>
0051             inm=in;
0052         <span class="keyword">end</span>
0053        
0054         <span class="keyword">if</span> norm_data
0055             moyy=infos.moy;
0056             stdd=infos.std;
0057             out=(in-moyy(ones(nbs,1),:))./stdd(ones(nbs,1),:);
0058             calc_para_norm=false;
0059         <span class="keyword">end</span>
0060         
0061         <span class="keyword">if</span> calc_para_norm
0062             <span class="comment">%calcul des moyennes et des ecarts type</span>
0063             moy_i=mean(inm);
0064             std_i=std(inm);
0065             <span class="comment">%test pour verification ecart type</span>
0066             ind=find(std_i==0);
0067             <span class="keyword">if</span> ~isempty(ind)
0068                 std_i(ind)=1;
0069             <span class="keyword">end</span>
0070             <span class="keyword">if</span> norm_manq
0071                 outm=(inm-moy_i(ones(infos.eval.nb,1),:))./<span class="keyword">...</span>
0072                     std_i(ones(infos.eval.nb,1),:);
0073                 out=NaN*zeros(size(in));
0074                 out(infos.eval.ix_dispo)=outm;
0075             <span class="keyword">else</span>
0076                 out=(inm-moy_i(ones(nbs,1),:))./std_i(ones(nbs,1),:);
0077             <span class="keyword">end</span>
0078             
0079             <span class="keyword">if</span> extr_infos
0080                 infos.moy=moy_i;
0081                 infos.std=std_i;
0082             <span class="keyword">end</span>
0083         <span class="keyword">end</span>
0084         <span class="keyword">if</span> ~calc_para_norm&amp;&amp;~norm_data
0085             out=in;            
0086         <span class="keyword">end</span>
0087         
0088         <span class="comment">%denormalisation</span>
0089     <span class="keyword">case</span> <span class="string">'denorm'</span>
0090         <span class="keyword">if</span> norm_data
0091             moyy=infos.moy;
0092             stdd=infos.std;
0093             out=stdd(ones(nbs,1),:).*in+moyy(ones(nbs,1),:);
0094         <span class="keyword">else</span>
0095             out=in;
0096         <span class="keyword">end</span>
0097         
0098         <span class="comment">%denormalisation d'une difference de valeurs normalisees</span>
0099     <span class="keyword">case</span> <span class="string">'denorm_diff'</span>
0100         <span class="keyword">if</span> norm_data
0101             stdd=infos.std;
0102             out=stdd(ones(nbs,1),:).*in;
0103         <span class="keyword">else</span>
0104             out=in;
0105         <span class="keyword">end</span>
0106     <span class="keyword">otherwise</span>
0107         error(<span class="string">'Mauvais nombre de parametres d''entrée (cf. norm_denorm.m)'</span>)
0108 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Thu 27-Aug-2015 11:57:14 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>