<?xml version="1.0" encoding="ISO-8859-1" ?>
<!-- Revision Id: $Id: demo-krigingAckley.xml 6377 2009-12-11 11:20:29Z dgorissen $ -->

<!-- This is a simple demo file that uses Kriging to model the 2D Ackley function -->

<ToolboxConfiguration version="7.0">

	<Plan>
		<LevelPlot>scattered</LevelPlot>
		<ContextConfig>default</ContextConfig>
		<SUMO>default</SUMO>
		
		<AdaptiveModelBuilder>kriging</AdaptiveModelBuilder>
		<InitialDesign>factorial</InitialDesign>
		<SampleSelector>default</SampleSelector>
		
		<Run name="#simulator#_demo" repeat="1">
			<Simulator>Math/Ackley/Ackley2D.xml</Simulator>
			<SampleEvaluator>matlab</SampleEvaluator>
			
			<Measure type="ValidationSet" target="0" errorFcn="rootMeanSquareError" use="on" />
			
			<Outputs>
				<Output name="y"/>
			</Outputs>
		</Run>
	
	</Plan>
	
	<AdaptiveModelBuilder id="kriging" type="AdaptiveModelBuilder" combineOutputs="false">
		
		<!-- See the documentaion for possible regression and correlation functions -->
		<ModelFactory id="kriging" type="KrigingFactory">
            <Option key="regressionMetric" value=""/>
			<Option key="regressionFunction" value="regpoly0"/>
			<Option key="multipleBasisFunctionsAllowed" value="false" />
			<BasisFunction type="BasisFunction" name="correxp">
				<Parameter name="theta" min="-2" max="2" scale="log" duplicate="true" />
			</BasisFunction>
            
            <Optimizer>fminconWithDerivatives</Optimizer>
		</ModelFactory>
	
	</AdaptiveModelBuilder>	
	
    <!-- Another optimizer (used by kriging components in this file) -->
	<Optimizer id="fminconWithDerivatives" type="MatlabOptimizer">
		<Option key="gradobj" value="on" />
		<Option key="derivativecheck" value="off" />
		<Option key="diagnostics" value="off" />
		<Option key="algorithm" value="active-set" />
	</Optimizer>
	
    
	<InitialDesign id="factorial" type="FactorialDesign">
		<Option key="levels" value="3" />
	</InitialDesign>

	<ContextConfig id="default">
		<OutputDirectory>output</OutputDirectory>
		<Option key="parallelMode" value="off"/>

		<PlotOptions>
			<Option key="saveModels" value="true"/>
			<Option key="plotModels" value="true"/>
			<Option key="withContour" value="true"/>
			<Option key="plotContour" value="false" />
			<Option key="outputType" value="png"/>
		</PlotOptions>

		<Option key="keepOldModels" value="off"/>
		
		<Path>
		</Path>

		<Profiling>
			<Profiler name=".*" enabled="true">
				<Output type="toTable"/>
				<Output type="toImage"/>
				<Output type="toFile"/>
				<Output type="toPanel"/>
			</Profiler>
						
		</Profiling>
		
	</ContextConfig>
	
	<Logging>
		<RootLogger>
		
			<Option key="runsInMainLog" value="true"/>
			<Option key="Level" value="INFO"/>

			<Handlers>
				<ConsoleHandler>
					<Option key="Level" value="INFO"/>
				</ConsoleHandler>

				<FileHandler>
					<Option key="Level" value="ALL"/>
				</FileHandler>
			</Handlers>
		</RootLogger>
		
		<Option key="ibbt.sumo" value="FINEST"/> 
		<Option key="Matlab" value="FINEST"/> 
	</Logging>
	
	<SUMO id="default" type="SUMO">
		<Option key="createMovie" value="yes"/>
		<Option key="minimumTotalSamples" value="0"/>
		<Option key="maximumTotalSamples" value="130"/>
		<Option key="maximumTime" value="Inf"/>
		<Option key="maxModelingIterations" value="Inf"/>
		<Option key="seedRandomState" value="default"/>			
		<Option key="stopOnError" value="true"/>
		<Option key="minimumInitialSamples" value="100%"/>
		<Option key="maximumSamples" value="10"/>
		<Option key="selectNewSamples" value="1" />
	</SUMO>
	
	<LevelPlot id="scattered" type="LevelPlot" combineOutputs="false">
		<Option key="makeLevelPlots" value="on"/>
		<SampleEvaluator type="ibbt.sumo.sampleevaluators.datasets.ScatteredDatasetSampleEvaluator">
		</SampleEvaluator>
	</LevelPlot>
	
	<SampleEvaluator id="matlab" type="ibbt.sumo.sampleevaluators.matlab.MatlabSampleEvaluator">
		<Option key="maxResubmissions" value="1"/>
		<Option key="sampleTimeout" value="-1"/>
	</SampleEvaluator>
    
	<!-- An adaptive sample selection algorithm (error based), driven by the evaluation of your model on a dense grid -->
	<SampleSelector id="error" type="PipelineSampleSelector" combineOutputs="false">
	
		<CandidateGenerator type="GridCandidateGenerator"/>
		
		<CandidateRanker type="modelDifference">
        	<Option key="criterion_parameter" value="4"/>
        </CandidateRanker>
        
        <MergeCriterion type="ClosenessThreshold">
		
			<!-- Closeness threshold, Double -->
			<Option key="closenessThreshold" value="0.2"/>
			<!-- Set a % of the maximumSamples to randomly chosen -->
			<Option key="randomPercentage" value="20"/>
		
			<Option key="debug" value="off" />
		</MergeCriterion>
	</SampleSelector>
	
	
	<!-- A highly adaptive sampling algorithm, error and density based -->
	<SampleSelector id="lola-voronoi" type="LOLAVoronoiSampleSelector" combineOutputs="false">
		<!-- Integer between 2 and 20 -->
		<Option key="neighbourhoodSize" value="2"/>
	</SampleSelector>

	<!-- LOLA sample selector combined with error based sample selector (default) -->
	<SampleSelector id="default" type="CombinedSampleSelector" combineOutputs="false">
		<SampleSelector weight="0.7">lola-voronoi</SampleSelector>
		<SampleSelector weight="0.3">error</SampleSelector>
	</SampleSelector>
	
	<InitialDesign id="lhdWithCornerPoints" type="CombinedDesign">
		<InitialDesign type="LatinHypercubeDesign">
			<Option key="points" value="10"/>
		</InitialDesign>

		<InitialDesign type="FactorialDesign">
			<Option key="levels" value="2" />
		</InitialDesign>
	</InitialDesign>
</ToolboxConfiguration>
