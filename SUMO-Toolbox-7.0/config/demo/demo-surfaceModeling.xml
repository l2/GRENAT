<?xml version="1.0" encoding="ISO-8859-1" ?>
<!-- Revision Id: $Id: default.xml 6085 2009-10-21 15:11:19Z ilm $ -->

<!-- This file is a simple illustration how SUMO can be used to model 3D surfaces -->

<ToolboxConfiguration version="7.0">
	
	<Plan>
		<ContextConfig>default</ContextConfig>
		<SUMO>default</SUMO>
		<InitialDesign>random</InitialDesign>
		<SampleEvaluator>matlab</SampleEvaluator>
		<AdaptiveModelBuilder>svmdirect</AdaptiveModelBuilder>

		<Simulator>3DModel/SphereSurface.xml</Simulator>

		<Measure type="SampleError" target="0" errorFcn="missclassrate" use="on" />
		
		<Run name="" repeat="1">
		</Run>
		
	</Plan>
	
	<!-- /////////////////////////////////////////////////////////////////////// -->

	<!-- ContextConfig contains configuration options global to the toolbox behavior -->
	<ContextConfig id="default">
		<PlotOptions>
			<Option key="saveModels" value="true"/>
			<Option key="plotModels" value="false"/>
			<Option key="withContour" value="false"/>
			<Option key="plotContour" value="true" />
		</PlotOptions>
		
		<!-- If set to on the parallelMode option will check if the Matlab Parallel Computing Toolbox
		is installed.  If so, model construction will occur in parallel where possible, thus speeding
		things up. Note that this option is still somewhat experimental.  If you get weird problems switch it off again. -->
		<Option key="parallelMode" value="off"/>
				
		<!--
		Configuration options for the profilers.  Profilers allow you to track the modeling process and understand what happens.
		Within a profiler block, one or more <Output type="type"/> specifiers should be present. Possible types are toFile, toPanel, toTable, and toImage.
		-->
		<Profiling>
			<!--
			You can restrict the available profilers to use by specifying a wildcard to disable the docked output if you dont want a window containing all the profilers.
			To select all profilers, simply put ".*"
			-->
			<Profiler name=".*Measure.*|.*BestModel.*|.*ElapsedTime.*|.*MemoryUse.*" enabled="true">
				<!-- note that the toImage/toPanel handlers are quite expensive to use, removing them will speed things up -->
				<Output type="toPanel"/>
				<Output type="toImage"/>
				<Output type="toTable"/>
				<Output type="toFile"/>
			</Profiler>		
		</Profiling>
		
	</ContextConfig>
	
	<!-- /////////////////////////////////////////////////////////////////////// -->
	<!-- How much logging information should the toolbox produce -->
	<Logging>

		<!-- Root logger -->
		<RootLogger>
		
			<!-- log all run-specific information in the main log as well -->
			<Option key="runsInMainLog" value="true"/>
		
			<!-- Set the default logging level for the root logger -->
			<Option key="Level" value="INFO"/>

			<!-- Specify the handlers to create in the root logger
			 (all loggers are children of the root logger).  The handlers determine
			 where logging output is sent to. 
			 
			 Possible levels are: OFF, SEVERE, WARNING, INFO, FINE, FINER, FINEST, ALL
			 -->		
			<Handlers>
				<!-- Configure ConsoleHandler (= output to the screen) -->
				<ConsoleHandler>
					<Option key="Level" value="INFO"/>
				</ConsoleHandler>

				<!-- Configure FileHandler (= output to file)-->
				<FileHandler>
					<Option key="Level" value="ALL"/>
				</FileHandler>
			</Handlers>
		</RootLogger>
		
		<!-- The Options here specify the level for a specific logger
		      This configures which log messages actually get generated -->
		<!-- <Option key="loggername" value="level" /> -->
		<Option key="ibbt.sumo" value="FINEST"/> 
		<Option key="Matlab" value="FINEST"/> 
	</Logging>


	<!-- /////////////////////////////////////////////////////////////////////// -->

	<!-- Important options that influence the whole modeling process -->
	<SUMO id="default" type="SUMO">
		<!--Should a movie be created of the model plots when the toolbox has terminated-->
		<Option key="createMovie" value="yes"/>
		<!-- The minimum amount of samples alotted to *EACH RUN*, dont stop untill we have at least this many samples -->
		<Option key="minimumTotalSamples" value="0"/>
		<!--The maximum amount of samples alotted to *EACH RUN*, stop the run and proceed to the next if this number of samples is exceeded (set to Inf to disable) -->
		<Option key="maximumTotalSamples" value="1000"/>
		<!--The amount of time (in minutes) alotted to *EACH RUN*, stop the run and proceed to the next if this number is exceeded (set to Inf to disable) -->
		<Option key="maximumTime" value="Inf"/>
		<!--
		The maximum number of adaptive modeling iterations  alotted to *EACH RUN*,
		stop the run and proceed to the	next if this number is exceeded
		(set to Inf to disable).
		-->
		<Option key="maxModelingIterations" value="Inf"/>
		<!--
		How should the random number generator files be seeded, 3 options:
		  - default: do nothing, the same seed will be used each time matlab is started
		  - random: random initial state
		  - file: load the state from the file specified by the randomStateFile option
		-->
		<Option key="seedRandomState" value="default"/>			
		<!--
		Stop the main loop if a fatal error occurs in the sample evaluator, if set to false
		the toolbox will switch to adaptive modeling mode (further sampling is switched off).
		-->
		<Option key="stopOnError" value="true"/>
		<!-- Minimum amount of samples that are to be evaluated from the initial sample set before the modeling process starts. 
		     This can either be an absolute number (e.g., 23) or a percentage (e.g., 95%) -->
		<Option key="minimumInitialSamples" value="100%"/>
		<!-- Maximum number of pending samples allowed at any time in the toolbox. -->
		<Option key="maximumSamples" value="2"/>
		<!--
			How many % samples should be at least retrieved every iteration (relative to the number of selected samples):
			0 %: just takes what is finished and continue modeling
			100 %: wait until all selected samples have been evaluated
		-->
		<Option key="minimumAdaptiveSamples" value="0" />
		<!-- Must samples be checked against the constraints before they are submitted for evaluation? -->
		<Option key="newSamplesMustSatisfyConstraints" value="yes"/>
		<!-- Must the entire dataset be used in adaptive modeling mode or not?
			 true: only the initial design is evaluated, and is used in adaptive modeling mode
			 false: the entire dataset is loaded immediately and used in adaptive modeling mode
		-->
		<Option key="adaptiveModelingInitialDesignOnly" value="no"/>
	</SUMO>
	
	<!-- /////////////////////////////////////////////////////////////////////// -->
	<SampleEvaluator id="scatteredDataset" type="ibbt.sumo.sampleevaluators.datasets.ScatteredDatasetSampleEvaluator">
	  <!-- Using an ID you can specify which dataset from the simulator file to use -->
	  <!-- <Option key="id" value="someDataset"/> -->
	</SampleEvaluator>
	
	<SampleEvaluator id="matlab" type="ibbt.sumo.sampleevaluators.matlab.MatlabSampleEvaluator">
		<!-- Maximum number of times to resubmit a point (e.g., in case something went wrong) -->
		<Option key="maxResubmissions" value="1"/>
		<!-- If a sample takes longer than "sampleTimeout*average evaluation time of one sample" 
		seconds to evaluate it is removed from the pending list (set to -1 to disable) -->
		<Option key="sampleTimeout" value="-1"/>
	</SampleEvaluator>
	
	<AdaptiveModelBuilder id="svmdirect" type="OptimizerModelBuilder" combineOutputs="false">
		<!-- Re-start strategy for resuming the optimization process between sampling iterations.
		     One of 'random','continue','model' and 'intelligent' (Default).  See the docs for more information -->
		<Option key="restartStrategy"	value="intelligent"/>
		<!-- Plot the optimization surface, visualizes the search through the parameter space (2D only) -->
		<Option key="plotOptimSurface"	value="false"/>
		
		<Optimizer id="opt" type="DirectOptimizer">
			<Option key="maxits" value="100"/>
			<Option key="maxevals" value="20"/>
		</Optimizer>
		
		<ModelFactory id="SVM" type="SVMFactory">
		      <Option key="mode"              value="classification"/>
			<Option key="backend" 		value="libSVM"/>
			<Option key="type"              value="C-SVC"/>
			<Option key="kernel" 		value="rbf"/>
			<Option key="kernelParamBounds" value="-2,2"/>
			<Option key="regParamBounds" 	value="-5,5"/>
			<Option key="nu"                value="0.01"/>
			<Option key="epsilon" 		value="1"/>
			<Option key="stoppingTolerance"	value="1e-4"/>
		</ModelFactory>
	</AdaptiveModelBuilder>
	
	<AdaptiveModelBuilder id="ann" type="SequentialModelBuilder" combineOutputs="false">
		<Option key="maximumRunLength" value="15"/>
		<!-- Degeneration of score if a model gets older -->
		<Option key="decay" value=".99"/>
		<!-- Size of the best model history -->
		<Option key="historySize" value="6"/>
		<!-- One of best, last. When set to best the best `historySize' models are kept,
		 - - when set to last, the last `historySize' models are kept -->
		<Option key="strategy" value="best"/>

		<ModelFactory id="ann" type="ANNFactory">
			<!--initial hidden layer dimension-->
			<Option key="initialSize" 		value="3,3"/>
			<!--comma separated list of allowed learning rules-->
			<Option key="allowedLearningRules"	value="trainbr"/>
			<!--performance function to use, empty means use the matlab default-->
			<Option key="performFcn"		value=""/>
			<!--how many epochs to train for-->
			<Option key="epochs" 			value="300"/>
			<!--max time to train for-->
			<Option key="trainingTime"		value="Inf"/>
			<!--range of initial random weights-->
			<Option key="initWeightRange" 		value="-0.8,0.8"/>
			<!--mutation changes x neurons at a time (in a random layer) with x in [lb ub]-->
			<Option key="hiddenUnitDelta" 		value="-2,3"/>
			<!--train until the error reaches this goal-->
			<Option key="trainingGoal" 		value="0"/>
			<!--show training progress every x epochs, set to NaN to disable-->
			<Option key="trainingProgress" 		value="NaN"/>
			<!--How to train the network, one of 'auto' or 'earlyStopping'
				auto: train with early stopping unless regularization is employed
				Set to any other value for simply training on all the data, doing nothing special -->
			<Option key="trainMethod" 		value="auto"/>
			<!--the training set - validation set - testset ratios-->
			<Option key="earlyStoppingRatios" 	value="0.80,0.20,0"/>
			<!-- Transfer function to use for all hidden layers and the output layer
			So should be a list of max 2 items -->
			<Option key="transferFunctionTemplate" 	value="tansig,purelin"/>
		</ModelFactory>
	</AdaptiveModelBuilder>
	
	<AdaptiveModelBuilder id="kriging" type="AdaptiveModelBuilder" combineOutputs="false">
	    <Option key="nBestModels" value="1" />
		
	    <!-- See the documentation for possible regression and correlation functions -->
	    <ModelFactory type="KrigingFactory">
		<Option key="regressionMetric" value=""/>
		<Option key="regressionFunction" value="regpoly0"/>
		<Option key="multipleBasisFunctionsAllowed" value="false" />
		  
		<Option key="initialTheta" value="0.5" />
		<BasisFunction id="corrgauss" type="BasisFunction" name="corrgauss" >
		  <Parameter name="theta" min="-2" max="2" scale="log" duplicate="true" />
		</BasisFunction>
		      
		<Optimizer id="fminconWithDerivatives" type="MatlabOptimizer">
		  <Option key="gradobj" value="on" />
		  <Option key="derivativecheck" value="off" />
		  <Option key="diagnostics" value="off" />
		  <Option key="algorithm" value="active-set" />
		</Optimizer>
	  </ModelFactory>	
	</AdaptiveModelBuilder>	
	
	<InitialDesign id="lhd" type="LatinHypercubeDesign">
		<Option key="points" value="500"/>
	</InitialDesign>
	
	<!-- Specifies a trivial Random design -->
	<InitialDesign id="random" type="RandomDesign">
		<Option key="points" value="1000"/>
	</InitialDesign>
	
	
</ToolboxConfiguration>
